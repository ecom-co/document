"use strict";(self.webpackChunktemplate_docs=self.webpackChunktemplate_docs||[]).push([[3660],{2671:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"microservices/communication/websockets","title":"WebSockets","description":"WebSockets gi\u1ed1ng nh\u01b0 \\"\u0111i\u1ec7n tho\u1ea1i\\" gi\u1eefa client v\xe0 server - k\u1ebft n\u1ed1i li\xean t\u1ee5c, c\xf3 th\u1ec3 giao ti\u1ebfp hai chi\u1ec1u real-time.","source":"@site/docs/microservices/communication/websockets.md","sourceDirName":"microservices/communication","slug":"/microservices/communication/websockets","permalink":"/document/vi/docs/microservices/communication/websockets","draft":false,"unlisted":false,"editUrl":"https://github.com/ecom-co/document/tree/main/docs/microservices/communication/websockets.md","tags":[],"version":"current","frontMatter":{"id":"websockets","title":"WebSockets","sidebar_label":"WebSockets"},"sidebar":"tutorialSidebar","previous":{"title":"Message Queues","permalink":"/document/vi/docs/microservices/communication/message-queues"},"next":{"title":"Event-Driven Communication","permalink":"/document/vi/docs/microservices/communication/event-driven"}}');var r=s(4848),t=s(8453);const l={id:"websockets",title:"WebSockets",sidebar_label:"WebSockets"},c="WebSockets",o={},h=[{value:"WebSockets l\xe0 g\xec?",id:"websockets-l\xe0-g\xec",level:2},{value:"Khi n\xe0o n\xean d\xf9ng v\xe0 khi n\xe0o kh\xf4ng n\xean d\xf9ng WebSockets",id:"khi-n\xe0o-n\xean-d\xf9ng-v\xe0-khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-websockets",level:2},{value:"<strong>Khi n\xe0o N\xcaN d\xf9ng WebSockets:</strong>",id:"khi-n\xe0o-n\xean-d\xf9ng-websockets",level:3},{value:"<strong>Khi n\xe0o KH\xd4NG N\xcaN d\xf9ng WebSockets:</strong>",id:"khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-websockets",level:3},{value:"C\xe1ch \xe1p d\u1ee5ng WebSockets hi\u1ec7u qu\u1ea3",id:"c\xe1ch-\xe1p-d\u1ee5ng-websockets-hi\u1ec7u-qu\u1ea3",level:2},{value:"<strong>1. Chi\u1ebfn l\u01b0\u1ee3c \xe1p d\u1ee5ng (Adoption Strategy):</strong>",id:"1-chi\u1ebfn-l\u01b0\u1ee3c-\xe1p-d\u1ee5ng-adoption-strategy",level:3},{value:"<strong>2. Best Practices khi \xe1p d\u1ee5ng:</strong>",id:"2-best-practices-khi-\xe1p-d\u1ee5ng",level:3},{value:"<strong>3. Common Pitfalls v\xe0 c\xe1ch tr\xe1nh:</strong>",id:"3-common-pitfalls-v\xe0-c\xe1ch-tr\xe1nh",level:3},{value:"Ki\u1ebfn tr\xfac WebSockets",id:"ki\u1ebfn-tr\xfac-websockets",level:2},{value:"<strong>1. Connection Flow - L\xfd thuy\u1ebft v\xe0 Quy tr\xecnh</strong>",id:"1-connection-flow---l\xfd-thuy\u1ebft-v\xe0-quy-tr\xecnh",level:3},{value:"**2. <strong>Connection Flow</strong>",id:"2-connection-flow",level:3},{value:"<strong>3. Message Flow - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"3-message-flow---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**4. <strong>Message Flow</strong>",id:"4-message-flow",level:3},{value:"WebSocket Implementation trong NestJS",id:"websocket-implementation-trong-nestjs",level:2},{value:"<strong>1. WebSocket Gateway - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"1-websocket-gateway---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**2. <strong>WebSocket Gateway Architecture</strong>",id:"2-websocket-gateway-architecture",level:3},{value:"WebSocket Patterns",id:"websocket-patterns",level:2},{value:"<strong>1. Room-based Communication - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"1-room-based-communication---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**3. <strong>Room-based Communication</strong>",id:"3-room-based-communication",level:3},{value:"<strong>2. Private Messaging - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"2-private-messaging---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**4. <strong>Private Messaging</strong>",id:"4-private-messaging",level:3},{value:"<strong>3. Broadcasting - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"3-broadcasting---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**5. <strong>Broadcasting Pattern</strong>",id:"5-broadcasting-pattern",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"<strong>1. Connection Management - L\xfd thuy\u1ebft v\xe0 Nguy\xean t\u1eafc</strong>",id:"1-connection-management---l\xfd-thuy\u1ebft-v\xe0-nguy\xean-t\u1eafc",level:3},{value:"<strong>2. Error Handling - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c</strong>",id:"2-error-handling---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",level:3},{value:"<strong>3. Performance Optimization - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c</strong>",id:"3-performance-optimization---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",level:3},{value:"So s\xe1nh v\u1edbi c\xe1c Protocol kh\xe1c",id:"so-s\xe1nh-v\u1edbi-c\xe1c-protocol-kh\xe1c",level:2},{value:"<strong>1. WebSockets vs REST:</strong>",id:"1-websockets-vs-rest",level:3},{value:"<strong>2. WebSockets vs gRPC:</strong>",id:"2-websockets-vs-grpc",level:3},{value:"<strong>3. WebSockets vs Message Queues:</strong>",id:"3-websockets-vs-message-queues",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"websockets",children:"WebSockets"})}),"\n",(0,r.jsx)(e.admonition,{title:"\ud83d\udca1 Kh\xe1i ni\u1ec7m c\u01a1 b\u1ea3n",type:"tip",children:(0,r.jsx)(e.p,{children:'WebSockets gi\u1ed1ng nh\u01b0 "\u0111i\u1ec7n tho\u1ea1i" gi\u1eefa client v\xe0 server - k\u1ebft n\u1ed1i li\xean t\u1ee5c, c\xf3 th\u1ec3 giao ti\u1ebfp hai chi\u1ec1u real-time.'})}),"\n",(0,r.jsx)(e.h2,{id:"websockets-l\xe0-g\xec",children:"WebSockets l\xe0 g\xec?"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft c\u01a1 b\u1ea3n:"}),"\nWebSockets l\xe0 m\u1ed9t protocol cho real-time, bidirectional communication gi\u1eefa client v\xe0 server. N\xf3 thi\u1ebft l\u1eadp m\u1ed9t persistent connection cho ph\xe9p data flow hai chi\u1ec1u m\xe0 kh\xf4ng c\u1ea7n HTTP request/response cycle."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Persistent Connection"}),": K\u1ebft n\u1ed1i li\xean t\u1ee5c gi\u1eefa client v\xe0 server"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Bidirectional"}),": Giao ti\u1ebfp hai chi\u1ec1u real-time"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Low Latency"}),": Latency th\u1ea5p do kh\xf4ng c\u1ea7n HTTP overhead"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Full-duplex"}),": C\xf3 th\u1ec3 g\u1eedi v\xe0 nh\u1eadn \u0111\u1ed3ng th\u1eddi"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Protocol Upgrade"}),": Upgrade t\u1eeb HTTP connection"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time"}),": Real-time data transmission"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Handshake"}),": Client g\u1eedi HTTP upgrade request"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Upgrade"}),": Server upgrade connection th\xe0nh WebSocket"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Persistent Connection"}),": Thi\u1ebft l\u1eadp persistent connection"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Data Exchange"}),": Giao ti\u1ebfp hai chi\u1ec1u real-time"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Management"}),": Qu\u1ea3n l\xfd connection lifecycle"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection State"}),": Disconnected \u2192 Handshaking \u2192 Connected \u2192 Active \u2192 Idle \u2192 Disconnected"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Data State"}),": No Data \u2192 Sending \u2192 Receiving \u2192 Processing \u2192 Responding"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Protocol State"}),": HTTP \u2192 Upgrading \u2192 WebSocket \u2192 Active \u2192 Closing"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110i\u1ec3m m\u1ea1nh (Strengths):"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time Communication"}),": Giao ti\u1ebfp real-time hai chi\u1ec1u"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Low Latency"}),": Latency th\u1ea5p h\u01a1n HTTP"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Persistent Connection"}),": Kh\xf4ng c\u1ea7n reconnect m\u1ed7i request"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Bidirectional"}),": C\xf3 th\u1ec3 g\u1eedi v\xe0 nh\u1eadn \u0111\u1ed3ng th\u1eddi"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Efficient"}),": \xcdt overhead h\u01a1n HTTP"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Browser Support"}),": H\u1ed7 tr\u1ee3 t\u1ed1t trong browsers"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Standard Protocol"}),": Web standard protocol"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event-driven"}),": Event-driven communication"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110i\u1ec3m y\u1ebfu (Weaknesses):"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Management"}),": Ph\u1ee9c t\u1ea1p qu\u1ea3n l\xfd connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Stateful"}),": Stateful connections kh\xf3 scale"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Firewall Issues"}),": C\xf3 th\u1ec3 b\u1ecb firewall block"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Proxy Problems"}),": Reverse proxies c\xf3 th\u1ec3 g\xe2y v\u1ea5n \u0111\u1ec1"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Memory Usage"}),": T\u1ed1n memory cho persistent connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Balancing"}),": Kh\xf3 implement load balancing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Handling"}),": Complex error handling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Testing Complexity"}),": Kh\xf3 test WebSocket connections"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"khi-n\xe0o-n\xean-d\xf9ng-v\xe0-khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-websockets",children:"Khi n\xe0o n\xean d\xf9ng v\xe0 khi n\xe0o kh\xf4ng n\xean d\xf9ng WebSockets"}),"\n",(0,r.jsx)(e.h3,{id:"khi-n\xe0o-n\xean-d\xf9ng-websockets",children:(0,r.jsx)(e.strong,{children:"Khi n\xe0o N\xcaN d\xf9ng WebSockets:"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"1. Real-time Applications:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Chat Applications"}),": Real-time messaging, group chat"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Live Streaming"}),": Video streaming, audio streaming"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gaming"}),": Real-time multiplayer games"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Live Dashboards"}),": Real-time monitoring, analytics"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"2. Bidirectional Communication:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Collaborative Tools"}),": Real-time collaboration"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Live Updates"}),": Real-time data updates"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Notifications"}),": Push notifications, alerts"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Interactive Features"}),": Real-time user interactions"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"3. Low Latency Requirements:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Financial Trading"}),": Real-time trading data"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"IoT Applications"}),": Device communication, sensor data"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time Analytics"}),": Live data processing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Performance Critical"}),": Applications c\u1ea7n performance cao"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"4. Persistent Connections:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Long-running Sessions"}),": User sessions d\xe0i"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Continuous Data Flow"}),": Continuous data streaming"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Reuse"}),": Reuse connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Stateful Applications"}),": Applications c\u1ea7n maintain state"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-websockets",children:(0,r.jsx)(e.strong,{children:"Khi n\xe0o KH\xd4NG N\xcaN d\xf9ng WebSockets:"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"1. Simple Request-Response:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"CRUD Operations"}),": Basic CRUD operations"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"REST APIs"}),": Simple API calls"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"One-time Requests"}),": One-time data requests"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Stateless Operations"}),": Stateless operations"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"2. High Scalability Requirements:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Massive Scale"}),": Systems c\u1ea7n scale r\u1ea5t l\u1edbn"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Stateless Architecture"}),": Stateless microservices"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Balancing"}),": C\u1ea7n load balancing \u0111\u01a1n gi\u1ea3n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Horizontal Scaling"}),": Horizontal scaling requirements"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"3. Firewall Restrictions:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Corporate Networks"}),": Corporate firewall restrictions"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Proxy Environments"}),": Reverse proxy environments"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Security Policies"}),": Strict security policies"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Network Limitations"}),": Network infrastructure limitations"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"4. Resource Constraints:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Memory Limitations"}),": Limited memory resources"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Limits"}),": Limited connection capacity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Server Resources"}),": Limited server resources"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cost Constraints"}),": High resource cost requirements"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"c\xe1ch-\xe1p-d\u1ee5ng-websockets-hi\u1ec7u-qu\u1ea3",children:"C\xe1ch \xe1p d\u1ee5ng WebSockets hi\u1ec7u qu\u1ea3"}),"\n",(0,r.jsx)(e.h3,{id:"1-chi\u1ebfn-l\u01b0\u1ee3c-\xe1p-d\u1ee5ng-adoption-strategy",children:(0,r.jsx)(e.strong,{children:"1. Chi\u1ebfn l\u01b0\u1ee3c \xe1p d\u1ee5ng (Adoption Strategy):"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Phase 1: Assessment & Planning"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Use Case Analysis"}),": X\xe1c \u0111\u1ecbnh use cases ph\xf9 h\u1ee3p"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Requirements"}),": Analyze connection requirements"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Scalability Planning"}),": Plan for scalability"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Infrastructure Review"}),": Review infrastructure capabilities"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Phase 2: Implementation"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSocket Server"}),": Implement WebSocket server"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Client Implementation"}),": Implement WebSocket client"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Management"}),": Implement connection management"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Handling"}),": Implement error handling"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Phase 3: Testing & Deployment"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Testing"}),": Test WebSocket connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Testing"}),": Test connection capacity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Scenarios"}),": Test error scenarios"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Production Deployment"}),": Deploy to production"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"2-best-practices-khi-\xe1p-d\u1ee5ng",children:(0,r.jsx)(e.strong,{children:"2. Best Practices khi \xe1p d\u1ee5ng:"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Connection Management:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Pooling"}),": Implement connection pooling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Heartbeat Mechanism"}),": Implement heartbeat mechanism"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Limits"}),": Set appropriate connection limits"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Cleanup"}),": Proper resource cleanup"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Error Handling:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Reconnection Logic"}),": Implement reconnection logic"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Classification"}),": Classify different error types"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fallback Mechanisms"}),": Implement fallback mechanisms"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Monitoring"}),": Monitor connection health"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Performance Optimization:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Batching"}),": Batch messages when possible"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Compression"}),": Use message compression"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Reuse"}),": Reuse connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Distribution"}),": Distribute load properly"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"3-common-pitfalls-v\xe0-c\xe1ch-tr\xe1nh",children:(0,r.jsx)(e.strong,{children:"3. Common Pitfalls v\xe0 c\xe1ch tr\xe1nh:"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Connection Issues:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Connection Limits"}),": Set appropriate connection limits"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Heartbeat"}),": Implement heartbeat mechanism"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Reconnection"}),": Implement reconnection logic"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Error Handling"}),": Implement proper error handling"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Scalability Issues:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Load Balancing"}),": Plan for load balancing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Connection Pooling"}),": Implement connection pooling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Resource Management"}),": Manage resources properly"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u274c No Monitoring"}),": Monitor connection health"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u2705 C\xe1ch tr\xe1nh:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Plan for Scale"}),": Plan scaling t\u1eeb \u0111\u1ea7u"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Implement Monitoring"}),": Monitor t\u1ea5t c\u1ea3 aspects"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Test Thoroughly"}),": Test \u0111\u1ea7y \u0111\u1ee7 c\xe1c scenarios"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Handle Errors"}),": Handle errors gracefully"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"ki\u1ebfn-tr\xfac-websockets",children:"Ki\u1ebfn tr\xfac WebSockets"}),"\n",(0,r.jsx)(e.h3,{id:"1-connection-flow---l\xfd-thuy\u1ebft-v\xe0-quy-tr\xecnh",children:(0,r.jsx)(e.strong,{children:"1. Connection Flow - L\xfd thuy\u1ebft v\xe0 Quy tr\xecnh"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Connection Flow:"}),"\nWebSocket connection flow b\u1eaft \u0111\u1ea7u v\u1edbi HTTP handshake, sau \u0111\xf3 upgrade th\xe0nh WebSocket connection. Connection n\xe0y persistent v\xe0 cho ph\xe9p bidirectional communication."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"HTTP Handshake"}),": Upgrade request t\u1eeb HTTP"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Protocol Upgrade"}),": Upgrade t\u1eeb HTTP sang WebSocket"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Persistent Connection"}),": Maintain connection"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Bidirectional Communication"}),": Two-way communication"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"HTTP Request"}),": Client g\u1eedi HTTP upgrade request"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Server Response"}),": Server respond v\u1edbi upgrade headers"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Upgrade"}),": Connection \u0111\u01b0\u1ee3c upgrade"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSocket Protocol"}),": S\u1eed d\u1ee5ng WebSocket protocol"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Data Exchange"}),": Giao ti\u1ebfp hai chi\u1ec1u"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Protocol State"}),": HTTP \u2192 Upgrading \u2192 WebSocket \u2192 Active"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection State"}),": Disconnected \u2192 Handshaking \u2192 Connected \u2192 Active"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Data State"}),": No Data \u2192 Handshake \u2192 Connected \u2192 Exchanging"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Standard Protocol"}),": S\u1eed d\u1ee5ng standard protocol"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Efficient"}),": \xcdt overhead h\u01a1n HTTP"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time"}),": Real-time communication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Bidirectional"}),": Two-way communication"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Complex Setup"}),": Setup ph\u1ee9c t\u1ea1p"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Stateful"}),": Stateful connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Usage"}),": T\u1ed1n resources"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"2-connection-flow",children:["**2. ",(0,r.jsx)(e.strong,{children:"Connection Flow"})]}),"\n",(0,r.jsx)(e.mermaid,{value:"sequenceDiagram\n    participant C as Client\n    participant S as Server\n    \n    C->>S: HTTP GET /ws (Upgrade Request)\n    S->>C: HTTP 101 Switching Protocols\n    Note over C,S: Connection Upgraded to WebSocket\n    \n    C->>S: WebSocket Frame (Hello)\n    S->>C: WebSocket Frame (Hello Back)\n    \n    loop Real-time Communication\n        C->>S: WebSocket Frame (Data)\n        S->>C: WebSocket Frame (Response)\n    end\n    \n    C->>S: WebSocket Close Frame\n    S->>C: WebSocket Close Frame"}),"\n",(0,r.jsx)(e.h3,{id:"3-message-flow---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,r.jsx)(e.strong,{children:"3. Message Flow - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Message Flow:"}),"\nWebSocket message flow cho ph\xe9p real-time, bidirectional data exchange. Messages \u0111\u01b0\u1ee3c g\u1eedi v\xe0 nh\u1eadn qua persistent connection m\xe0 kh\xf4ng c\u1ea7n HTTP request/response cycle."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time"}),": Immediate message delivery"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Bidirectional"}),": Send v\xe0 receive \u0111\u1ed3ng th\u1eddi"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Framed"}),": Messages \u0111\u01b0\u1ee3c frame theo WebSocket spec"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Efficient"}),": \xcdt overhead h\u01a1n HTTP"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Creation"}),": Create message content"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Framing"}),": Frame message theo WebSocket spec"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Transmission"}),": Transmit qua connection"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Reception"}),": Receive v\xe0 parse message"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Processing"}),": Process message content"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message State"}),": Created \u2192 Framed \u2192 Transmitted \u2192 Received \u2192 Parsed \u2192 Processed"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection State"}),": Idle \u2192 Sending \u2192 Receiving \u2192 Processing \u2192 Idle"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Data State"}),": Raw \u2192 Formatted \u2192 Transmitted \u2192 Received \u2192 Processed"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time"}),": Real-time message delivery"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Efficient"}),": Efficient message transmission"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Bidirectional"}),": Two-way message flow"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Low Latency"}),": Low latency communication"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Complexity"}),": Message handling ph\u1ee9c t\u1ea1p"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"State Management"}),": C\u1ea7n qu\u1ea3n l\xfd message state"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Handling"}),": Complex error handling"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"4-message-flow",children:["**4. ",(0,r.jsx)(e.strong,{children:"Message Flow"})]}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart LR\n    A[Client] --\x3e|WebSocket Frame| B[WebSocket Connection]\n    B --\x3e|WebSocket Frame| C[Server]\n    \n    C --\x3e|Process Message| D[Business Logic]\n    D --\x3e|Generate Response| E[Response Creation]\n    E --\x3e|WebSocket Frame| B\n    B --\x3e|WebSocket Frame| A\n    \n    F[Message Queue] --\x3e B\n    G[Event System] --\x3e B\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1"}),"\n",(0,r.jsx)(e.h2,{id:"websocket-implementation-trong-nestjs",children:"WebSocket Implementation trong NestJS"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 WebSockets trong NestJS:"}),"\nNestJS cung c\u1ea5p built-in support cho WebSockets th\xf4ng qua ",(0,r.jsx)(e.code,{children:"@nestjs/websockets"})," package. N\xf3 s\u1eed d\u1ee5ng Socket.io ho\u1eb7c native WebSockets \u0111\u1ec3 implement real-time communication."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gateway Support"}),": WebSocket gateways"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event Handling"}),": Event-based message handling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room Management"}),": Room-based communication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Authentication"}),": WebSocket authentication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Guards"}),": WebSocket guards"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Interceptors"}),": WebSocket interceptors"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gateway Definition"}),": \u0110\u1ecbnh ngh\u0129a WebSocket gateway"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event Handlers"}),": Implement event handlers"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Management"}),": Manage WebSocket connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Routing"}),": Route messages \u0111\u1ebfn handlers"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gateway State"}),": Unregistered \u2192 Registered \u2192 Active \u2192 Handling Connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection State"}),": Disconnected \u2192 Connecting \u2192 Connected \u2192 Active"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event State"}),": Received \u2192 Routed \u2192 Handled \u2192 Responded"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Native Integration"}),": T\xedch h\u1ee3p t\u1ed1t v\u1edbi NestJS"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event-based"}),": Event-based architecture"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room Support"}),": Room-based communication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Authentication"}),": Built-in authentication"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Learning Curve"}),": C\u1ea7n hi\u1ec3u WebSocket concepts"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Complexity"}),": WebSocket complexity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"State Management"}),": C\u1ea7n qu\u1ea3n l\xfd connection state"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"1-websocket-gateway---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,r.jsx)(e.strong,{children:"1. WebSocket Gateway - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 WebSocket Gateway:"}),"\nWebSocket Gateway trong NestJS x\u1eed l\xfd WebSocket connections v\xe0 messages. N\xf3 s\u1eed d\u1ee5ng decorators \u0111\u1ec3 define event handlers v\xe0 manage connections."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gateway Decorator"}),": S\u1eed d\u1ee5ng ",(0,r.jsx)(e.code,{children:"@WebSocketGateway()"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event Handlers"}),": S\u1eed d\u1ee5ng ",(0,r.jsx)(e.code,{children:"@SubscribeMessage()"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Events"}),": Handle connection events"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Handling"}),": Handle incoming messages"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gateway Registration"}),": Register gateway v\u1edbi NestJS"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Handling"}),": Handle WebSocket connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event Routing"}),": Route events \u0111\u1ebfn handlers"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Processing"}),": Process incoming messages"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gateway State"}),": Unregistered \u2192 Registered \u2192 Active \u2192 Handling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection State"}),": Disconnected \u2192 Connected \u2192 Active \u2192 Processing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event State"}),": Received \u2192 Routed \u2192 Handled \u2192 Responded"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Clean Architecture"}),": Separation of concerns"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Event-based"}),": Event-based message handling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Type Safety"}),": TypeScript support"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Easy Testing"}),": D\u1ec5 d\xe0ng test"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Complexity"}),": WebSocket complexity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"State Management"}),": Connection state management"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Handling"}),": Complex error handling"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"2-websocket-gateway-architecture",children:["**2. ",(0,r.jsx)(e.strong,{children:"WebSocket Gateway Architecture"})]}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart TD\n    A[WebSocket Client] --\x3e|Connect| B[WebSocket Gateway]\n    B --\x3e|Connection Event| C[Connection Handler]\n    \n    A --\x3e|Send Message| D[Message Router]\n    D --\x3e|Route Event| E[Event Handler 1]\n    D --\x3e|Route Event| F[Event Handler 2]\n    D --\x3e|Route Event| G[Event Handler 3]\n    \n    E --\x3e|Process| H[Business Logic 1]\n    F --\x3e|Process| I[Business Logic 2]\n    G --\x3e|Process| J[Business Logic 3]\n    \n    H --\x3e|Response| K[Response Generator]\n    I --\x3e|Response| K\n    J --\x3e|Response| K\n    \n    K --\x3e|Send Response| A\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0\n    style K fill:#fce4ec"}),"\n",(0,r.jsx)(e.h2,{id:"websocket-patterns",children:"WebSocket Patterns"}),"\n",(0,r.jsx)(e.h3,{id:"1-room-based-communication---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,r.jsx)(e.strong,{children:"1. Room-based Communication - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Room-based Communication:"}),"\nRoom-based communication cho ph\xe9p group users v\xe0o rooms v\xe0 send messages \u0111\u1ebfn specific rooms. Pattern n\xe0y ph\xf9 h\u1ee3p cho chat applications, multiplayer games, v\xe0 collaborative tools."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room Management"}),": Create v\xe0 manage rooms"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User Joining"}),": Users join v\xe0 leave rooms"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room Broadcasting"}),": Send messages \u0111\u1ebfn room members"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room Isolation"}),": Messages ch\u1ec9 \u0111\u1ebfn room members"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room Creation"}),": Create room v\u1edbi unique ID"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User Joining"}),": Users join room"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Broadcasting"}),": Send messages \u0111\u1ebfn room"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room Management"}),": Manage room lifecycle"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Room State"}),": Created \u2192 Active \u2192 Inactive \u2192 Deleted"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User State"}),": Not Joined \u2192 Joined \u2192 Active \u2192 Left"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message State"}),": Created \u2192 Broadcasted \u2192 Received \u2192 Processed"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Group Communication"}),": Effective group communication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Isolation"}),": Messages ch\u1ec9 \u0111\u1ebfn intended recipients"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Scalability"}),": Scale rooms independently"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User Management"}),": Easy user management"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Complexity"}),": Room management complexity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Usage"}),": T\u1ed1n resources cho rooms"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"State Management"}),": C\u1ea7n qu\u1ea3n l\xfd room state"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"3-room-based-communication",children:["**3. ",(0,r.jsx)(e.strong,{children:"Room-based Communication"})]}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart TD\n    A[User 1] --\x3e|Join Room A| B[Room A]\n    C[User 2] --\x3e|Join Room A| B\n    D[User 3] --\x3e|Join Room B| E[Room B]\n    F[User 4] --\x3e|Join Room B| E\n    \n    B --\x3e|Broadcast Message| A\n    B --\x3e|Broadcast Message| C\n    \n    E --\x3e|Broadcast Message| D\n    E --\x3e|Broadcast Message| F\n    \n    G[Room Manager] --\x3e B\n    G --\x3e E\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1"}),"\n",(0,r.jsx)(e.h3,{id:"2-private-messaging---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,r.jsx)(e.strong,{children:"2. Private Messaging - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Private Messaging:"}),"\nPrivate messaging cho ph\xe9p users g\u1eedi messages ri\xeang t\u01b0 cho nhau. Pattern n\xe0y s\u1eed d\u1ee5ng direct connections ho\u1eb7c private channels \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o privacy."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Direct Connection"}),": Direct connection gi\u1eefa users"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Private Channels"}),": Private channels cho messaging"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Authentication"}),": User authentication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Encryption"}),": Message encryption cho privacy"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User Authentication"}),": Authenticate users"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Private Channel"}),": Create private channel"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Sending"}),": Send private message"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Delivery"}),": Deliver message \u0111\u1ebfn recipient"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Channel State"}),": Created \u2192 Active \u2192 Inactive \u2192 Closed"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message State"}),": Created \u2192 Encrypted \u2192 Transmitted \u2192 Decrypted \u2192 Delivered"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User State"}),": Unauthenticated \u2192 Authenticated \u2192 Connected \u2192 Messaging"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Privacy"}),": Ensure message privacy"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Direct Communication"}),": Direct user communication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Security"}),": Secure messaging"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User Control"}),": User control over messages"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Complexity"}),": Security complexity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Usage"}),": T\u1ed1n resources cho private channels"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Scalability"}),": Kh\xf3 scale private messaging"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"4-private-messaging",children:["**4. ",(0,r.jsx)(e.strong,{children:"Private Messaging"})]}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart LR\n    A[User A] --\x3e|Authenticate| B[Authentication Service]\n    C[User B] --\x3e|Authenticate| B\n    \n    A --\x3e|Create Private Channel| D[Private Channel]\n    C --\x3e|Join Private Channel| D\n    \n    A --\x3e|Send Private Message| E[Message Encryption]\n    E --\x3e|Encrypted Message| D\n    D --\x3e|Decrypt Message| F[Message Decryption]\n    F --\x3e|Decrypted Message| C\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd"}),"\n",(0,r.jsx)(e.h3,{id:"3-broadcasting---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,r.jsx)(e.strong,{children:"3. Broadcasting - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Broadcasting:"}),"\nBroadcasting pattern g\u1eedi messages \u0111\u1ebfn t\u1ea5t c\u1ea3 connected clients. Pattern n\xe0y ph\xf9 h\u1ee3p cho notifications, announcements, v\xe0 system-wide updates."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Global Broadcasting"}),": Send messages \u0111\u1ebfn t\u1ea5t c\u1ea3 clients"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Selective Broadcasting"}),": Broadcast \u0111\u1ebfn specific groups"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Efficient Delivery"}),": Efficient message delivery"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Distribution"}),": Distribute load properly"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Creation"}),": Create broadcast message"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Client Discovery"}),": Discover connected clients"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Distribution"}),": Distribute message \u0111\u1ebfn clients"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Delivery Confirmation"}),": Confirm message delivery"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message State"}),": Created \u2192 Distributed \u2192 Delivered \u2192 Confirmed"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Client State"}),": Connected \u2192 Receiving \u2192 Processing \u2192 Responding"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Broadcast State"}),": Initiated \u2192 Distributing \u2192 Completed"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Global Reach"}),": Reach t\u1ea5t c\u1ea3 clients"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Efficient"}),": Efficient message distribution"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time"}),": Real-time updates"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Scalability"}),": Scale broadcasting"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Usage"}),": T\u1ed1n resources cho broadcasting"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Duplication"}),": Messages \u0111\u1ebfn t\u1ea5t c\u1ea3 clients"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Impact"}),": C\xf3 th\u1ec3 impact system load"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"5-broadcasting-pattern",children:["**5. ",(0,r.jsx)(e.strong,{children:"Broadcasting Pattern"})]}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart TD\n    A[Broadcast Service] --\x3e|Create Message| B[Message Creator]\n    B --\x3e|Broadcast Message| C[Message Distributor]\n    \n    C --\x3e|Distribute| D[Client 1]\n    C --\x3e|Distribute| E[Client 2]\n    C --\x3e|Distribute| F[Client 3]\n    C --\x3e|Distribute| G[Client 4]\n    \n    D --\x3e|Process| H[Processing 1]\n    E --\x3e|Process| I[Processing 2]\n    F --\x3e|Process| J[Processing 3]\n    G --\x3e|Process| K[Processing 4]\n    \n    H --\x3e|Confirm| L[Delivery Confirmation]\n    I --\x3e|Confirm| L\n    J --\x3e|Confirm| L\n    K --\x3e|Confirm| L\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0\n    style K fill:#fce4ec\n    style L fill:#c8e6c9"}),"\n",(0,r.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(e.h3,{id:"1-connection-management---l\xfd-thuy\u1ebft-v\xe0-nguy\xean-t\u1eafc",children:(0,r.jsx)(e.strong,{children:"1. Connection Management - L\xfd thuy\u1ebft v\xe0 Nguy\xean t\u1eafc"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nguy\xean t\u1eafc c\u01a1 b\u1ea3n:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Limits"}),": Set appropriate connection limits"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Heartbeat Mechanism"}),": Implement heartbeat mechanism"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Cleanup"}),": Proper resource cleanup"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Pooling"}),": Use connection pooling"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Quy t\u1eafc l\u1ef1a ch\u1ecdn:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Capacity"}),": Plan connection capacity"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Management"}),": Manage resources properly"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Health Monitoring"}),": Monitor connection health"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cleanup Strategy"}),": Plan cleanup strategy"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Trade-offs c\u1ea7n c\xe2n nh\u1eafc:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Capacity vs Resources"}),": Balance capacity v\xe0 resources"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Performance vs Reliability"}),": Balance performance v\xe0 reliability"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Complexity vs Functionality"}),": Balance complexity v\xe0 functionality"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"2-error-handling---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",children:(0,r.jsx)(e.strong,{children:"2. Error Handling - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nguy\xean l\xfd x\u1eed l\xfd l\u1ed7i:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Classification"}),": Classify different error types"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Reconnection Logic"}),": Implement reconnection logic"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fallback Mechanisms"}),": Implement fallback mechanisms"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Monitoring"}),": Monitor error patterns"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Chi\u1ebfn l\u01b0\u1ee3c x\u1eed l\xfd l\u1ed7i:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Errors"}),": Handle connection errors"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Errors"}),": Handle message errors"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"System Errors"}),": Handle system errors"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Recovery Actions"}),": Take recovery actions"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Best Practices:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Classify Errors"}),": Classify errors properly"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Implement Recovery"}),": Implement recovery mechanisms"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Monitor Errors"}),": Monitor error patterns"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Handle Gracefully"}),": Handle errors gracefully"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"3-performance-optimization---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",children:(0,r.jsx)(e.strong,{children:"3. Performance Optimization - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nguy\xean l\xfd t\u1ed1i \u01b0u performance:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Batching"}),": Batch messages when possible"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Reuse"}),": Reuse connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Distribution"}),": Distribute load properly"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Optimization"}),": Optimize resource usage"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Chi\u1ebfn l\u01b0\u1ee3c t\u1ed1i \u01b0u:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Batching Strategy"}),": Plan batching strategy"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Strategy"}),": Plan connection strategy"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Load Strategy"}),": Plan load distribution"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Resource Strategy"}),": Plan resource optimization"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Best Practices:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Batch Messages"}),": Batch messages when possible"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Reuse Connections"}),": Reuse connections"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Distribute Load"}),": Distribute load properly"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Optimize Resources"}),": Optimize resource usage"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"so-s\xe1nh-v\u1edbi-c\xe1c-protocol-kh\xe1c",children:"So s\xe1nh v\u1edbi c\xe1c Protocol kh\xe1c"}),"\n",(0,r.jsx)(e.h3,{id:"1-websockets-vs-rest",children:(0,r.jsx)(e.strong,{children:"1. WebSockets vs REST:"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Communication Pattern:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Persistent connection, bidirectional"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"REST"}),": Request-response, stateless"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": WebSockets cho real-time, REST cho simple APIs"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Performance:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Low latency, high throughput"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"REST"}),": Higher latency, lower overhead"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": WebSockets t\u1ed1t h\u01a1n cho real-time"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Real-time apps, chat, gaming"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"REST"}),": CRUD operations, simple APIs"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Kh\xe1c nhau, kh\xf4ng thay th\u1ebf \u0111\u01b0\u1ee3c nhau"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"2-websockets-vs-grpc",children:(0,r.jsx)(e.strong,{children:"2. WebSockets vs gRPC:"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Communication Pattern:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Browser-based, bidirectional"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"gRPC"}),": Server-to-server, high performance"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": WebSockets cho browsers, gRPC cho servers"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Performance:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Good browser performance"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"gRPC"}),": High server performance"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": gRPC t\u1ed1t h\u01a1n cho server communication"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Browser Support:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Full browser support"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"gRPC"}),": Limited browser support"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": WebSockets t\u1ed1t h\u01a1n cho browser apps"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"3-websockets-vs-message-queues",children:(0,r.jsx)(e.strong,{children:"3. WebSockets vs Message Queues:"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Communication Pattern:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Real-time, immediate"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Queues"}),": Asynchronous, queued"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": WebSockets cho real-time, MQ cho async"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": User interactions, real-time updates"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Message Queues"}),": Background jobs, event processing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Kh\xe1c nhau, kh\xf4ng thay th\u1ebf \u0111\u01b0\u1ee3c nhau"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.admonition,{title:"\ud83d\udca1 L\u1eddi khuy\xean t\u1ed5ng k\u1ebft - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh",type:"tip",children:[(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nguy\xean t\u1eafc c\u01a1 b\u1ea3n:"})}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Protocol Selection"}),": WebSockets ph\xf9 h\u1ee3p cho real-time, bidirectional communication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Performance vs Complexity"}),": WebSockets c\xf3 performance cao nh\u01b0ng complexity cao"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Real-time vs Stateless"}),": WebSockets real-time, REST stateless"]}),"\n"]}),(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Quy t\u1eafc th\u1ef1c h\xe0nh:"})}),(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Cho real-time apps, chat, gaming, live updates"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"REST"}),": Cho simple APIs, CRUD operations"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"gRPC"}),": Cho high-performance server communication"]}),"\n"]}),(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"L\xfd do t\u1ea1i sao:"})}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"WebSockets"}),": Real-time, bidirectional, low latency"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"REST"}),": Simple, universal, stateless"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"gRPC"}),": High performance, strong typing, streaming"]}),"\n"]}),(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"C\xe1ch x\u1eed l\xfd bi\u1ebfn \u0111\u1ed5i:"})}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"State Management"}),": WebSockets stateful, REST stateless, gRPC stateful"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Handling"}),": WebSockets reconnection, REST status codes, gRPC error codes"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Performance Optimization"}),": WebSockets connection reuse, REST caching, gRPC connection pooling"]}),"\n"]})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"B\xe0i ti\u1ebfp theo:"})," ",(0,r.jsx)(e.a,{href:"/docs/microservices/communication/event-driven",children:"Event-Driven Communication"})]})]})}function a(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>l,x:()=>c});var i=s(6540);const r={},t=i.createContext(r);function l(n){const e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);