"use strict";(self.webpackChunktemplate_docs=self.webpackChunktemplate_docs||[]).push([[5920],{28453:(e,r,t)=>{t.d(r,{R:()=>c,x:()=>o});var n=t(96540);const s={},d=n.createContext(s);function c(e){const r=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(d.Provider,{value:r},e.children)}},33e3:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"overview/decorators","title":"Decorators","description":"T\xecm hi\u1ec3u v\u1ec1 Decorators - t\u1ea5t c\u1ea3 decorators c\xf3 s\u1eb5n trong NestJS v\xe0 c\xe1ch t\u1ea1o custom decorator","source":"@site/docs/overview/decorators.md","sourceDirName":"overview","slug":"/overview/decorators","permalink":"/document/vi/docs/overview/decorators","draft":false,"unlisted":false,"editUrl":"https://github.com/ecom-co/document/tree/main/docs/overview/decorators.md","tags":[],"version":"current","frontMatter":{"title":"Decorators","description":"T\xecm hi\u1ec3u v\u1ec1 Decorators - t\u1ea5t c\u1ea3 decorators c\xf3 s\u1eb5n trong NestJS v\xe0 c\xe1ch t\u1ea1o custom decorator"},"sidebar":"tutorialSidebar","previous":{"title":"Pipes","permalink":"/document/vi/docs/overview/pipes"},"next":{"title":"Circular Dependency","permalink":"/document/vi/docs/tips/circular-dependency"}}');var s=t(74848),d=t(28453);const c={title:"Decorators",description:"T\xecm hi\u1ec3u v\u1ec1 Decorators - t\u1ea5t c\u1ea3 decorators c\xf3 s\u1eb5n trong NestJS v\xe0 c\xe1ch t\u1ea1o custom decorator"},o="Decorators",i={},l=[{value:"Decorators l\xe0 g\xec?",id:"decorators-l\xe0-g\xec",level:2},{value:"B\u1ea3ng t\u1ed5ng h\u1ee3p t\u1ea5t c\u1ea3 Decorators",id:"b\u1ea3ng-t\u1ed5ng-h\u1ee3p-t\u1ea5t-c\u1ea3-decorators",level:2},{value:"Class Decorators",id:"class-decorators",level:3},{value:"Method Decorators",id:"method-decorators",level:3},{value:"Parameter Decorators",id:"parameter-decorators",level:3},{value:"Property Decorators",id:"property-decorators",level:3},{value:"Lifecycle Decorators",id:"lifecycle-decorators",level:3},{value:"Validation Decorators",id:"validation-decorators",level:3},{value:"C\xe1ch t\u1ea1o Custom Decorator",id:"c\xe1ch-t\u1ea1o-custom-decorator",level:2},{value:"1. Method Decorator",id:"1-method-decorator",level:3},{value:"2. Parameter Decorator",id:"2-parameter-decorator",level:3},{value:"3. Class Decorator",id:"3-class-decorator",level:3},{value:"4. Property Decorator",id:"4-property-decorator",level:3},{value:"S\u1eed d\u1ee5ng Custom Decorators",id:"s\u1eed-d\u1ee5ng-custom-decorators",level:2},{value:"1. V\u1edbi Guards",id:"1-v\u1edbi-guards",level:3},{value:"2. V\u1edbi Interceptors",id:"2-v\u1edbi-interceptors",level:3},{value:"3. V\u1edbi Pipes",id:"3-v\u1edbi-pipes",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Naming Convention",id:"1-naming-convention",level:3},{value:"2. Reusability",id:"2-reusability",level:3},{value:"3. Error Handling",id:"3-error-handling",level:3},{value:"Testing Custom Decorators",id:"testing-custom-decorators",level:2},{value:"1. Testing Parameter Decorator",id:"1-testing-parameter-decorator",level:3}];function a(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"decorators",children:"Decorators"})}),"\n",(0,s.jsx)(r.p,{children:"Decorators trong NestJS l\xe0 c\xe1c functions \u0111\u1eb7c bi\u1ec7t \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 th\xeam metadata, thay \u0111\u1ed5i behavior ho\u1eb7c m\u1edf r\u1ed9ng functionality c\u1ee7a classes, methods, properties. Ch\xfang l\xe0 n\u1ec1n t\u1ea3ng c\u1ee7a NestJS framework."}),"\n",(0,s.jsx)(r.mermaid,{value:"flowchart LR\n    A[Decorators] --\x3e B[Class Decorators]\n    A --\x3e C[Method Decorators]\n    A --\x3e D[Parameter Decorators]\n    A --\x3e E[Property Decorators]\n    \n    style A fill:#e3f2fd\n    style B fill:#f3e5f5\n    style C fill:#e8f5e8\n    style D fill:#fff3e0\n    style E fill:#fce4ec"}),"\n",(0,s.jsx)(r.admonition,{title:"\ud83d\udca1 Kh\xe1i ni\u1ec7m c\u01a1 b\u1ea3n",type:"tip",children:(0,s.jsx)(r.p,{children:'Decorators gi\u1ed1ng nh\u01b0 "nh\xe3n d\xe1n" tr\xean code - ch\xfang cung c\u1ea5p th\xf4ng tin cho NestJS bi\u1ebft c\xe1ch x\u1eed l\xfd class, method ho\u1eb7c parameter.'})}),"\n",(0,s.jsx)(r.h2,{id:"decorators-l\xe0-g\xec",children:"Decorators l\xe0 g\xec?"}),"\n",(0,s.jsx)(r.p,{children:"Decorators trong NestJS:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Metadata"})," - Cung c\u1ea5p th\xf4ng tin cho framework"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Behavior Modification"})," - Thay \u0111\u1ed5i c\xe1ch ho\u1ea1t \u0111\u1ed9ng"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Dependency Injection"})," - H\u1ed7 tr\u1ee3 DI system"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Validation"})," - Ki\u1ec3m tra v\xe0 validate data"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Routing"})," - \u0110\u1ecbnh ngh\u0129a HTTP routes"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Security"})," - Ki\u1ec3m so\xe1t quy\u1ec1n truy c\u1eadp"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"b\u1ea3ng-t\u1ed5ng-h\u1ee3p-t\u1ea5t-c\u1ea3-decorators",children:"B\u1ea3ng t\u1ed5ng h\u1ee3p t\u1ea5t c\u1ea3 Decorators"}),"\n",(0,s.jsx)(r.h3,{id:"class-decorators",children:"Class Decorators"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Decorator"}),(0,s.jsx)(r.th,{children:"M\u1ee5c \u0111\xedch"}),(0,s.jsx)(r.th,{children:"V\xed d\u1ee5"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Module()"})}),(0,s.jsx)(r.td,{children:"\u0110\u1ecbnh ngh\u0129a module"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Module({ controllers: [], providers: [] })"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Controller()"})}),(0,s.jsx)(r.td,{children:"\u0110\u1ecbnh ngh\u0129a controller"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Controller('users')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Injectable()"})}),(0,s.jsx)(r.td,{children:"\u0110\xe1nh d\u1ea5u class c\xf3 th\u1ec3 inject"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Injectable()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Global()"})}),(0,s.jsx)(r.td,{children:"\u0110\xe1nh d\u1ea5u module global"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Global()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseFilters()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng exception filters"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseFilters(HttpExceptionFilter)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseGuards()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng guards"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseGuards(AuthGuard)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseInterceptors()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng interceptors"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseInterceptors(LoggingInterceptor)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UsePipes()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng pipes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UsePipes(ValidationPipe)"})})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"method-decorators",children:"Method Decorators"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Decorator"}),(0,s.jsx)(r.th,{children:"M\u1ee5c \u0111\xedch"}),(0,s.jsx)(r.th,{children:"V\xed d\u1ee5"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Get()"})}),(0,s.jsx)(r.td,{children:"HTTP GET method"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Get('users')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Post()"})}),(0,s.jsx)(r.td,{children:"HTTP POST method"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Post('users')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Put()"})}),(0,s.jsx)(r.td,{children:"HTTP PUT method"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Put('users/:id')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Patch()"})}),(0,s.jsx)(r.td,{children:"HTTP PATCH method"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Patch('users/:id')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Delete()"})}),(0,s.jsx)(r.td,{children:"HTTP DELETE method"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Delete('users/:id')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Options()"})}),(0,s.jsx)(r.td,{children:"HTTP OPTIONS method"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Options('users')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Head()"})}),(0,s.jsx)(r.td,{children:"HTTP HEAD method"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Head('users')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@All()"})}),(0,s.jsx)(r.td,{children:"T\u1ea5t c\u1ea3 HTTP methods"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@All('users')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseFilters()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng exception filters"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseFilters(HttpExceptionFilter)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseGuards()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng guards"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseGuards(AuthGuard)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseInterceptors()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng interceptors"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UseInterceptors(LoggingInterceptor)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UsePipes()"})}),(0,s.jsx)(r.td,{children:"\xc1p d\u1ee5ng pipes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@UsePipes(ValidationPipe)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@HttpCode()"})}),(0,s.jsx)(r.td,{children:"\u0110\u1eb7t HTTP status code"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@HttpCode(201)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Header()"})}),(0,s.jsx)(r.td,{children:"\u0110\u1eb7t HTTP headers"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Header('Cache-Control', 'none')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Redirect()"})}),(0,s.jsx)(r.td,{children:"Redirect response"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Redirect('https://example.com')"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Render()"})}),(0,s.jsx)(r.td,{children:"Render view template"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Render('index')"})})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"parameter-decorators",children:"Parameter Decorators"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Decorator"}),(0,s.jsx)(r.th,{children:"M\u1ee5c \u0111\xedch"}),(0,s.jsx)(r.th,{children:"V\xed d\u1ee5"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Param()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y route parameters"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Param('id') id: string"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Query()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y query parameters"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Query('page') page: number"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Body()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y request body"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Body() createUserDto: CreateUserDto"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Headers()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y request headers"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Headers() headers: any"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Session()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y session data"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Session() session: any"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Ip()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y IP address"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Ip() ip: string"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@HostParam()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y host parameters"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@HostParam('subdomain') subdomain: string"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Req()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y request object"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Req() req: Request"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Res()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y response object"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Res() res: Response"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Next()"})}),(0,s.jsx)(r.td,{children:"L\u1ea5y next function"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Next() next: NextFunction"})})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"property-decorators",children:"Property Decorators"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Decorator"}),(0,s.jsx)(r.th,{children:"M\u1ee5c \u0111\xedch"}),(0,s.jsx)(r.th,{children:"V\xed d\u1ee5"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Inject()"})}),(0,s.jsx)(r.td,{children:"Inject dependency"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Inject('CONFIG') config: any"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Optional()"})}),(0,s.jsx)(r.td,{children:"\u0110\xe1nh d\u1ea5u dependency optional"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Optional() @Inject('LOGGER') logger?: Logger"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@SkipThrottle()"})}),(0,s.jsx)(r.td,{children:"B\u1ecf qua throttling"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@SkipThrottle()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Throttle()"})}),(0,s.jsx)(r.td,{children:"\u0110\u1eb7t throttling limit"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@Throttle(10, 60)"})})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"lifecycle-decorators",children:"Lifecycle Decorators"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Decorator"}),(0,s.jsx)(r.th,{children:"M\u1ee5c \u0111\xedch"}),(0,s.jsx)(r.th,{children:"V\xed d\u1ee5"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnModuleInit()"})}),(0,s.jsx)(r.td,{children:"Sau khi module init"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnModuleInit()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnModuleDestroy()"})}),(0,s.jsx)(r.td,{children:"Tr\u01b0\u1edbc khi module destroy"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnModuleDestroy()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnApplicationBootstrap()"})}),(0,s.jsx)(r.td,{children:"Sau khi app bootstrap"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnApplicationBootstrap()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnApplicationShutdown()"})}),(0,s.jsx)(r.td,{children:"Tr\u01b0\u1edbc khi app shutdown"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@OnApplicationShutdown()"})})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"validation-decorators",children:"Validation Decorators"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Decorator"}),(0,s.jsx)(r.th,{children:"M\u1ee5c \u0111\xedch"}),(0,s.jsx)(r.th,{children:"V\xed d\u1ee5"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsString()"})}),(0,s.jsx)(r.td,{children:"Validate string"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsString()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsNumber()"})}),(0,s.jsx)(r.td,{children:"Validate number"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsNumber()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsEmail()"})}),(0,s.jsx)(r.td,{children:"Validate email"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsEmail()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsOptional()"})}),(0,s.jsx)(r.td,{children:"\u0110\xe1nh d\u1ea5u optional"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@IsOptional()"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@MinLength()"})}),(0,s.jsx)(r.td,{children:"\u0110\u1ed9 d\xe0i t\u1ed1i thi\u1ec3u"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@MinLength(3)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@MaxLength()"})}),(0,s.jsx)(r.td,{children:"\u0110\u1ed9 d\xe0i t\u1ed1i \u0111a"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@MaxLength(50)"})})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"c\xe1ch-t\u1ea1o-custom-decorator",children:"C\xe1ch t\u1ea1o Custom Decorator"}),"\n",(0,s.jsx)(r.h3,{id:"1-method-decorator",children:"1. Method Decorator"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Custom Method Decorator"',children:"// decorators/roles.decorator.ts\nimport { SetMetadata } from '@nestjs/common';\n\nexport const ROLES_KEY = 'roles';\nexport const Roles = (...roles: string[]) => SetMetadata(ROLES_KEY, roles);\n\n// S\u1eed d\u1ee5ng\n@Controller('users')\nexport class UserController {\n  @Get('admin')\n  @Roles('admin')\n  adminOnly() {\n    return 'Admin only';\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-parameter-decorator",children:"2. Parameter Decorator"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Custom Parameter Decorator"',children:"// decorators/user.decorator.ts\nimport { createParamDecorator, ExecutionContext } from '@nestjs/common';\n\nexport const CurrentUser = createParamDecorator(\n  (data: string, ctx: ExecutionContext) => {\n    const request = ctx.switchToHttp().getRequest();\n    const user = request.user;\n\n    return data ? user?.[data] : user;\n  },\n);\n\n// S\u1eed d\u1ee5ng\n@Controller('users')\nexport class UserController {\n  @Get('profile')\n  getProfile(@CurrentUser() user: User) {\n    return user;\n  }\n\n  @Get('profile/email')\n  getEmail(@CurrentUser('email') email: string) {\n    return email;\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-class-decorator",children:"3. Class Decorator"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Custom Class Decorator"',children:"// decorators/api-version.decorator.ts\nimport { SetMetadata } from '@nestjs/common';\n\nexport const API_VERSION_KEY = 'apiVersion';\nexport const ApiVersion = (version: string) => SetMetadata(API_VERSION_KEY, version);\n\n// S\u1eed d\u1ee5ng\n@Controller('users')\n@ApiVersion('v1')\nexport class UserController {\n  // Controller methods\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"4-property-decorator",children:"4. Property Decorator"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Custom Property Decorator"',children:"// decorators/transform.decorator.ts\nimport { Transform } from 'class-transformer';\n\nexport const ToLowerCase = () => Transform(({ value }) => {\n  return typeof value === 'string' ? value.toLowerCase() : value;\n});\n\n// S\u1eed d\u1ee5ng\nexport class CreateUserDto {\n  @ToLowerCase()\n  email: string;\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"s\u1eed-d\u1ee5ng-custom-decorators",children:"S\u1eed d\u1ee5ng Custom Decorators"}),"\n",(0,s.jsx)(r.h3,{id:"1-v\u1edbi-guards",children:"1. V\u1edbi Guards"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Using Custom Decorator with Guard"',children:"// guards/roles.guard.ts\nimport { Injectable, CanActivate, ExecutionContext } from '@nestjs/common';\nimport { Reflector } from '@nestjs/core';\nimport { ROLES_KEY } from '../decorators/roles.decorator';\n\n@Injectable()\nexport class RolesGuard implements CanActivate {\n  constructor(private reflector: Reflector) {}\n\n  canActivate(context: ExecutionContext): boolean {\n    const requiredRoles = this.reflector.getAllAndOverride<string[]>(ROLES_KEY, [\n      context.getHandler(),\n      context.getClass(),\n    ]);\n\n    if (!requiredRoles) {\n      return true;\n    }\n\n    const { user } = context.switchToHttp().getRequest();\n    return requiredRoles.some((role) => user.roles?.includes(role));\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-v\u1edbi-interceptors",children:"2. V\u1edbi Interceptors"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Using Custom Decorator with Interceptor"',children:"// interceptors/version.interceptor.ts\nimport { Injectable, NestInterceptor, ExecutionContext, CallHandler } from '@nestjs/common';\nimport { Reflector } from '@nestjs/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { API_VERSION_KEY } from '../decorators/api-version.decorator';\n\n@Injectable()\nexport class VersionInterceptor implements NestInterceptor {\n  constructor(private reflector: Reflector) {}\n\n  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {\n    const version = this.reflector.getAllAndOverride<string>(API_VERSION_KEY, [\n      context.getHandler(),\n      context.getClass(),\n    ]);\n\n    return next.handle().pipe(\n      map(data => ({\n        ...data,\n        version: version || 'v1',\n        timestamp: new Date().toISOString()\n      }))\n    );\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-v\u1edbi-pipes",children:"3. V\u1edbi Pipes"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Using Custom Decorator with Pipe"',children:"// pipes/transform.pipe.ts\nimport { Injectable, PipeTransform, ArgumentMetadata } from '@nestjs/common';\nimport { plainToClass } from 'class-transformer';\n\n@Injectable()\nexport class TransformPipe implements PipeTransform {\n  transform(value: any, metadata: ArgumentMetadata) {\n    if (metadata.metatype) {\n      return plainToClass(metadata.metatype, value);\n    }\n    return value;\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(r.h3,{id:"1-naming-convention",children:"1. Naming Convention"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Naming Convention Best Practice"',children:"// \u2705 T\u1ed1t - T\xean r\xf5 r\xe0ng\nexport const CurrentUser = createParamDecorator(...);\nexport const Roles = (...roles: string[]) => SetMetadata(...);\nexport const ApiVersion = (version: string) => SetMetadata(...);\n\n// \u274c Kh\xf4ng t\u1ed1t - T\xean kh\xf4ng r\xf5 r\xe0ng\nexport const User = createParamDecorator(...);\nexport const R = (...roles: string[]) => SetMetadata(...);\nexport const V = (version: string) => SetMetadata(...);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-reusability",children:"2. Reusability"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Reusability Best Practice"',children:"// \u2705 T\u1ed1t - Decorator c\xf3 th\u1ec3 t\xe1i s\u1eed d\u1ee5ng\nexport const Roles = (...roles: string[]) => SetMetadata('roles', roles);\nexport const AdminOnly = () => Roles('admin');\nexport const UserOnly = () => Roles('user');\n\n// \u274c Kh\xf4ng t\u1ed1t - Decorator c\u1ee9ng nh\u1eafc\nexport const AdminRole = () => SetMetadata('roles', ['admin']);\nexport const UserRole = () => SetMetadata('roles', ['user']);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-error-handling",children:"3. Error Handling"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Error Handling Best Practice"',children:"// \u2705 T\u1ed1t - X\u1eed l\xfd l\u1ed7i gracefully\nexport const CurrentUser = createParamDecorator(\n  (data: string, ctx: ExecutionContext) => {\n    try {\n      const request = ctx.switchToHttp().getRequest();\n      const user = request.user;\n\n      if (!user) {\n        throw new UnauthorizedException('User not found');\n      }\n\n      return data ? user?.[data] : user;\n    } catch (error) {\n      throw new UnauthorizedException('Invalid user data');\n    }\n  },\n);\n"})}),"\n",(0,s.jsx)(r.h2,{id:"testing-custom-decorators",children:"Testing Custom Decorators"}),"\n",(0,s.jsx)(r.h3,{id:"1-testing-parameter-decorator",children:"1. Testing Parameter Decorator"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",metastring:'title="Testing Custom Parameter Decorator"',children:"describe('CurrentUser Decorator', () => {\n  it('should extract user from request', () => {\n    const mockUser = { id: 1, name: 'John' };\n    const mockRequest = { user: mockUser };\n    const mockContext = {\n      switchToHttp: () => ({ getRequest: () => mockRequest })\n    } as ExecutionContext;\n\n    const result = CurrentUser(undefined, mockContext);\n    expect(result).toEqual(mockUser);\n  });\n\n  it('should extract specific user property', () => {\n    const mockUser = { id: 1, name: 'John' };\n    const mockRequest = { user: mockUser };\n    const mockContext = {\n      switchToHttp: () => ({ getRequest: () => mockRequest })\n    } as ExecutionContext;\n\n    const result = CurrentUser('name', mockContext);\n    expect(result).toBe('John');\n  });\n});\n"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.admonition,{title:"\ud83d\udca1 L\u1eddi khuy\xean t\u1ed5ng k\u1ebft",type:"tip",children:(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"S\u1eed d\u1ee5ng decorators c\xf3 s\u1eb5n khi c\xf3 th\u1ec3"}),"\n",(0,s.jsx)(r.li,{children:"T\u1ea1o custom decorators cho logic nghi\u1ec7p v\u1ee5 c\u1ee5 th\u1ec3"}),"\n",(0,s.jsx)(r.li,{children:"Tu\xe2n th\u1ee7 naming convention r\xf5 r\xe0ng"}),"\n",(0,s.jsx)(r.li,{children:"\u0110\u1ea3m b\u1ea3o decorators c\xf3 th\u1ec3 t\xe1i s\u1eed d\u1ee5ng"}),"\n",(0,s.jsx)(r.li,{children:"Test custom decorators m\u1ed9t c\xe1ch comprehensive"}),"\n",(0,s.jsx)(r.li,{children:"S\u1eed d\u1ee5ng metadata keys nh\u1ea5t qu\xe1n"}),"\n"]})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"B\xe0i ti\u1ebfp theo:"})," ",(0,s.jsx)(r.a,{href:"/docs/overview/exception-filters",children:"Exception Filters"})]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);