"use strict";(self.webpackChunktemplate_docs=self.webpackChunktemplate_docs||[]).push([[4063],{11470:(e,n,r)=>{r.d(n,{A:()=>T});var s=r(96540),t=r(34164),l=r(23104),i=r(56347),a=r(205),o=r(57485),d=r(31682),c=r(70679);function u(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:n,children:r}=e;return(0,s.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:r,default:s}})=>({value:e,label:n,attributes:r,default:s}))}(r);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}function x({queryString:e=!1,groupId:n}){const r=(0,i.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(t),(0,s.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(r.location.search);n.set(t,e),r.replace({...r.location,search:n.toString()})},[t,r])]}function f(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,l=m(e),[i,o]=(0,s.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:l})),[d,u]=x({queryString:r,groupId:t}),[f,p]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,t]=(0,c.Dv)(n);return[r,(0,s.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),j=(()=>{const e=d??f;return h({value:e,tabValues:l})?e:null})();(0,a.A)(()=>{j&&o(j)},[j]);return{selectedValue:i,selectValue:(0,s.useCallback)(e=>{if(!h({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),p(e)},[u,p,l]),tabValues:l}}var p=r(92303);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=r(74848);function g({className:e,block:n,selectedValue:r,selectValue:s,tabValues:i}){const a=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),d=e=>{const n=e.currentTarget,t=a.indexOf(n),l=i[t].value;l!==r&&(o(n),s(l))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=a.indexOf(e.currentTarget)+1;n=a[r]??a[0];break}case"ArrowLeft":{const r=a.indexOf(e.currentTarget)-1;n=a[r]??a[a.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:s})=>(0,v.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{a.push(e)},onKeyDown:c,onClick:d,...s,className:(0,t.A)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:r}){const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=l.find(e=>e.props.value===r);return e?(0,s.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function b(e){const n=f(e);return(0,v.jsxs)("div",{className:(0,t.A)("tabs-container",j.tabList),children:[(0,v.jsx)(g,{...n,...e}),(0,v.jsx)(y,{...n,...e})]})}function T(e){const n=(0,p.A)();return(0,v.jsx)(b,{...e,children:u(e.children)},String(n))}},28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var s=r(96540);const t={},l=s.createContext(t);function i(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(l.Provider,{value:n},e.children)}},34351:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"ecom-co/libs/typeorm/docs/transformers","title":"Transformers \u2014 Value Transformers cho TypeORM","description":"Transformers module cung c\u1ea5p c\xe1c value transformers \u0111\u1ec3 chuy\u1ec3n \u0111\u1ed5i d\u1eef li\u1ec7u gi\u1eefa JavaScript v\xe0 database, bao g\u1ed3m BooleanTransformer v\xe0 NumericTransformer.","source":"@site/docs/ecom-co/libs/typeorm/docs/transformers.md","sourceDirName":"ecom-co/libs/typeorm/docs","slug":"/transformers","permalink":"/document/vi/docs/transformers","draft":false,"unlisted":false,"editUrl":"https://github.com/ecom-co/document/tree/main/docs/ecom-co/libs/typeorm/docs/transformers.md","tags":[{"inline":true,"label":"transformers","permalink":"/document/vi/docs/tags/transformers"},{"inline":true,"label":"value-transformers","permalink":"/document/vi/docs/tags/value-transformers"},{"inline":true,"label":"boolean","permalink":"/document/vi/docs/tags/boolean"},{"inline":true,"label":"numeric","permalink":"/document/vi/docs/tags/numeric"},{"inline":true,"label":"typeorm","permalink":"/document/vi/docs/tags/typeorm"},{"inline":true,"label":"database","permalink":"/document/vi/docs/tags/database"}],"version":"current","frontMatter":{"id":"transformers","title":"Transformers \u2014 Value Transformers cho TypeORM","sidebar_label":"Transformers","slug":"/transformers","description":"Transformers module cung c\u1ea5p c\xe1c value transformers \u0111\u1ec3 chuy\u1ec3n \u0111\u1ed5i d\u1eef li\u1ec7u gi\u1eefa JavaScript v\xe0 database, bao g\u1ed3m BooleanTransformer v\xe0 NumericTransformer.","tags":["transformers","value-transformers","boolean","numeric","typeorm","database"]},"sidebar":"tutorialSidebar","previous":{"title":"Repository","permalink":"/document/vi/docs/repository"},"next":{"title":"Migrations & Seeding","permalink":"/document/vi/docs/migrations-seeding"}}');var t=r(74848),l=r(28453);r(11470);const i={id:"transformers",title:"Transformers \u2014 Value Transformers cho TypeORM",sidebar_label:"Transformers",slug:"/transformers",description:"Transformers module cung c\u1ea5p c\xe1c value transformers \u0111\u1ec3 chuy\u1ec3n \u0111\u1ed5i d\u1eef li\u1ec7u gi\u1eefa JavaScript v\xe0 database, bao g\u1ed3m BooleanTransformer v\xe0 NumericTransformer.",tags:["transformers","value-transformers","boolean","numeric","typeorm","database"]},a=void 0,o={},d=[{value:"T\u1ed5ng quan",id:"t\u1ed5ng-quan",level:2},{value:"BooleanTransformer",id:"booleantransformer",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Implementation",id:"implementation",level:3},{value:"from() Method",id:"from-method",level:3},{value:"Input Values",id:"input-values",level:4},{value:"V\xed d\u1ee5 s\u1eed d\u1ee5ng",id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng",level:4},{value:"to() Method",id:"to-method",level:3},{value:"Output Values",id:"output-values",level:4},{value:"V\xed d\u1ee5 s\u1eed d\u1ee5ng",id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-1",level:4},{value:"S\u1eed d\u1ee5ng trong Entity",id:"s\u1eed-d\u1ee5ng-trong-entity",level:3},{value:"NumericTransformer",id:"numerictransformer",level:2},{value:"Use Cases",id:"use-cases-1",level:3},{value:"Implementation",id:"implementation-1",level:3},{value:"from() Method",id:"from-method-1",level:3},{value:"Input Values",id:"input-values-1",level:4},{value:"V\xed d\u1ee5 s\u1eed d\u1ee5ng",id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-2",level:4},{value:"to() Method",id:"to-method-1",level:3},{value:"Output Values",id:"output-values-1",level:4},{value:"V\xed d\u1ee5 s\u1eed d\u1ee5ng",id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-3",level:4},{value:"S\u1eed d\u1ee5ng trong Entity",id:"s\u1eed-d\u1ee5ng-trong-entity-1",level:3},{value:"T\u1ea1o Custom Transformers",id:"t\u1ea1o-custom-transformers",level:2},{value:"Extending ValueTransformer",id:"extending-valuetransformer",level:3},{value:"V\xed d\u1ee5: DateTransformer",id:"v\xed-d\u1ee5-datetransformer",level:3},{value:"V\xed d\u1ee5: JSONTransformer",id:"v\xed-d\u1ee5-jsontransformer",level:3},{value:"S\u1eed d\u1ee5ng trong Migration",id:"s\u1eed-d\u1ee5ng-trong-migration",level:2},{value:"T\u1ea1o Table v\u1edbi Transformers",id:"t\u1ea1o-table-v\u1edbi-transformers",level:3},{value:"L\u01b0u \xfd Migration",id:"l\u01b0u-\xfd-migration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"V\xed d\u1ee5 ho\xe0n ch\u1ec9nh",id:"v\xed-d\u1ee5-ho\xe0n-ch\u1ec9nh",level:2},{value:"User Entity v\u1edbi Transformers",id:"user-entity-v\u1edbi-transformers",level:3},{value:"Product Entity v\u1edbi Transformers",id:"product-entity-v\u1edbi-transformers",level:3},{value:"S\u1eed d\u1ee5ng trong Service",id:"s\u1eed-d\u1ee5ng-trong-service",level:3}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"Transformers module cung c\u1ea5p c\xe1c value transformers \u0111\u1ec3 chuy\u1ec3n \u0111\u1ed5i d\u1eef li\u1ec7u gi\u1eefa JavaScript v\xe0 database, \u0111\u1eb7c bi\u1ec7t h\u1eefu \xedch cho c\xe1c tr\u01b0\u1eddng h\u1ee3p c\u1ea7n x\u1eed l\xfd boolean v\xe0 numeric values v\u1edbi null handling."})}),"\n",(0,t.jsx)(n.h2,{id:"t\u1ed5ng-quan",children:"T\u1ed5ng quan"}),"\n",(0,t.jsx)(n.p,{children:"Transformers module bao g\u1ed3m:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"BooleanTransformer"})," - Chuy\u1ec3n \u0111\u1ed5i boolean \u2194 integer (0/1)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"NumericTransformer"})," - X\u1eed l\xfd numeric values v\u1edbi validation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ValueTransformer interface"})," - Tu\xe2n th\u1ee7 TypeORM ValueTransformer"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Null handling"})," - X\u1eed l\xfd null/undefined values an to\xe0n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"booleantransformer",children:"BooleanTransformer"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"BooleanTransformer"})," chuy\u1ec3n \u0111\u1ed5i boolean values gi\u1eefa JavaScript boolean v\xe0 database integer representation."]}),"\n",(0,t.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"}),(0,t.jsx)(n.th,{children:"V\xed d\u1ee5"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Database compatibility"})}),(0,t.jsx)(n.td,{children:"Databases kh\xf4ng h\u1ed7 tr\u1ee3 boolean type"}),(0,t.jsx)(n.td,{children:"MySQL, SQLite"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Legacy systems"})}),(0,t.jsx)(n.td,{children:"H\u1ec7 th\u1ed1ng c\u0169 s\u1eed d\u1ee5ng 0/1"}),(0,t.jsx)(n.td,{children:"Legacy applications"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Performance"})}),(0,t.jsx)(n.td,{children:"Integer operations nhanh h\u01a1n boolean"}),(0,t.jsx)(n.td,{children:"High-performance queries"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export class BooleanTransformer implements ValueTransformer {\n    from(value: unknown): boolean | null;\n    to(value?: boolean | null): 0 | 1 | null | undefined;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"from-method",children:"from() Method"}),"\n",(0,t.jsx)(n.p,{children:"Chuy\u1ec3n \u0111\u1ed5i database value th\xe0nh JavaScript boolean."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"from(value: unknown): boolean | null\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-values",children:"Input Values"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Input"}),(0,t.jsx)(n.th,{children:"Output"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"1"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})}),(0,t.jsx)(n.td,{children:"Integer 1 = true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"0"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"Integer 0 = false"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})}),(0,t.jsx)(n.td,{children:"Boolean true = true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"Boolean false = false"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'1'"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})}),(0,t.jsx)(n.td,{children:"String '1' = true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'0'"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"String '0' = false"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Null = null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"undefined"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Undefined = null"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng",children:"V\xed d\u1ee5 s\u1eed d\u1ee5ng"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const transformer = new BooleanTransformer();\n\ntransformer.from(1); // true\ntransformer.from(0); // false\ntransformer.from('1'); // true\ntransformer.from('0'); // false\ntransformer.from(true); // true\ntransformer.from(false); // false\ntransformer.from(null); // null\ntransformer.from('abc'); // false (kh\xf4ng ph\u1ea3i 1, true, '1')\n"})}),"\n",(0,t.jsx)(n.h3,{id:"to-method",children:"to() Method"}),"\n",(0,t.jsx)(n.p,{children:"Chuy\u1ec3n \u0111\u1ed5i JavaScript boolean th\xe0nh database value."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"to(value?: boolean | null): 0 | 1 | null | undefined\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-values",children:"Output Values"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Input"}),(0,t.jsx)(n.th,{children:"Output"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"1"})}),(0,t.jsx)(n.td,{children:"Boolean true \u2192 Integer 1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"0"})}),(0,t.jsx)(n.td,{children:"Boolean false \u2192 Integer 0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Null \u2192 Null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"undefined"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"undefined"})}),(0,t.jsx)(n.td,{children:"Undefined \u2192 Undefined"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-1",children:"V\xed d\u1ee5 s\u1eed d\u1ee5ng"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const transformer = new BooleanTransformer();\n\ntransformer.to(true); // 1\ntransformer.to(false); // 0\ntransformer.to(null); // null\ntransformer.to(undefined); // undefined\n"})}),"\n",(0,t.jsx)(n.h3,{id:"s\u1eed-d\u1ee5ng-trong-entity",children:"S\u1eed d\u1ee5ng trong Entity"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Entity, Column } from 'typeorm';\nimport { BooleanTransformer } from '@ecom-co/orm';\nimport { OrmBaseEntity } from '@ecom-co/orm';\n\n@Entity('users')\nexport class User extends OrmBaseEntity {\n    @Column({\n        type: 'int',\n        transformer: new BooleanTransformer(),\n        comment: 'User active status stored as integer',\n    })\n    isActive!: boolean;\n\n    @Column({\n        type: 'int',\n        transformer: new BooleanTransformer(),\n        default: 1, // true\n    })\n    isVerified!: boolean;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"numerictransformer",children:"NumericTransformer"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"NumericTransformer"})," x\u1eed l\xfd numeric values v\u1edbi proper null handling v\xe0 validation."]}),"\n",(0,t.jsx)(n.h3,{id:"use-cases-1",children:"Use Cases"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"}),(0,t.jsx)(n.th,{children:"V\xed d\u1ee5"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Data validation"})}),(0,t.jsx)(n.td,{children:"Ki\u1ec3m tra v\xe0 x\u1eed l\xfd invalid numeric data"}),(0,t.jsx)(n.td,{children:"User input validation"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Null handling"})}),(0,t.jsx)(n.td,{children:"X\u1eed l\xfd null/undefined values an to\xe0n"}),(0,t.jsx)(n.td,{children:"Optional numeric fields"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Type conversion"})}),(0,t.jsx)(n.td,{children:"Chuy\u1ec3n \u0111\u1ed5i string numbers th\xe0nh numbers"}),(0,t.jsx)(n.td,{children:"CSV import, API responses"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"implementation-1",children:"Implementation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export class NumericTransformer implements ValueTransformer {\n    from(value: unknown): null | number;\n    to(value?: null | number): null | number | undefined;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"from-method-1",children:"from() Method"}),"\n",(0,t.jsx)(n.p,{children:"Chuy\u1ec3n \u0111\u1ed5i database value th\xe0nh JavaScript number."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"from(value: unknown): null | number\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-values-1",children:"Input Values"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Input"}),(0,t.jsx)(n.th,{children:"Output"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'123.45'"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"123.45"})}),(0,t.jsx)(n.td,{children:"String number \u2192 Number"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"123.45"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"123.45"})}),(0,t.jsx)(n.td,{children:"Number \u2192 Number"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'0'"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"0"})}),(0,t.jsx)(n.td,{children:"String zero \u2192 Number zero"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Null \u2192 Null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"undefined"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Undefined \u2192 Null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'invalid'"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Invalid string \u2192 Null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NaN"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"NaN \u2192 Null"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-2",children:"V\xed d\u1ee5 s\u1eed d\u1ee5ng"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const transformer = new NumericTransformer();\n\ntransformer.from('123.45'); // 123.45\ntransformer.from(123.45); // 123.45\ntransformer.from('0'); // 0\ntransformer.from(0); // 0\ntransformer.from(null); // null\ntransformer.from('abc'); // null (invalid)\ntransformer.from(''); // null (empty string)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"to-method-1",children:"to() Method"}),"\n",(0,t.jsx)(n.p,{children:"Chuy\u1ec3n \u0111\u1ed5i JavaScript number th\xe0nh database value."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"to(value?: null | number): null | number | undefined\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-values-1",children:"Output Values"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Input"}),(0,t.jsx)(n.th,{children:"Output"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"123.45"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"123.45"})}),(0,t.jsx)(n.td,{children:"Number \u2192 Number"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"0"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"0"})}),(0,t.jsx)(n.td,{children:"Zero \u2192 Zero"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})}),(0,t.jsx)(n.td,{children:"Null \u2192 Null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"undefined"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"undefined"})}),(0,t.jsx)(n.td,{children:"Undefined \u2192 Undefined"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-3",children:"V\xed d\u1ee5 s\u1eed d\u1ee5ng"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const transformer = new NumericTransformer();\n\ntransformer.to(123.45); // 123.45\ntransformer.to(0); // 0\ntransformer.to(null); // null\ntransformer.to(undefined); // undefined\n"})}),"\n",(0,t.jsx)(n.h3,{id:"s\u1eed-d\u1ee5ng-trong-entity-1",children:"S\u1eed d\u1ee5ng trong Entity"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Entity, Column } from 'typeorm';\nimport { NumericTransformer } from '@ecom-co/orm';\nimport { OrmBaseEntity } from '@ecom-co/orm';\n\n@Entity('products')\nexport class Product extends OrmBaseEntity {\n    @Column({\n        type: 'decimal',\n        precision: 10,\n        scale: 2,\n        transformer: new NumericTransformer(),\n        comment: 'Product price with validation',\n    })\n    price!: number;\n\n    @Column({\n        type: 'decimal',\n        precision: 5,\n        scale: 2,\n        transformer: new NumericTransformer(),\n        nullable: true,\n        comment: 'Optional discount percentage',\n    })\n    discountPercentage?: number | null;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"t\u1ea1o-custom-transformers",children:"T\u1ea1o Custom Transformers"}),"\n",(0,t.jsx)(n.h3,{id:"extending-valuetransformer",children:"Extending ValueTransformer"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { ValueTransformer } from 'typeorm';\n\nexport class CustomTransformer implements ValueTransformer {\n    from(value: unknown): any {\n        // Logic chuy\u1ec3n \u0111\u1ed5i t\u1eeb database\n        return value;\n    }\n\n    to(value?: any): any {\n        // Logic chuy\u1ec3n \u0111\u1ed5i sang database\n        return value;\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"v\xed-d\u1ee5-datetransformer",children:"V\xed d\u1ee5: DateTransformer"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export class DateTransformer implements ValueTransformer {\n    from(value: unknown): Date | null {\n        if (value == null) return null;\n\n        try {\n            return new Date(value as string | number);\n        } catch {\n            return null;\n        }\n    }\n\n    to(value?: Date | null): string | null | undefined {\n        if (value == null) return value;\n\n        return value.toISOString();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"v\xed-d\u1ee5-jsontransformer",children:"V\xed d\u1ee5: JSONTransformer"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export class JSONTransformer implements ValueTransformer {\n    from(value: unknown): any {\n        if (value == null) return null;\n\n        try {\n            return typeof value === 'string' ? JSON.parse(value) : value;\n        } catch {\n            return null;\n        }\n    }\n\n    to(value?: any): string | null | undefined {\n        if (value == null) return value;\n\n        try {\n            return JSON.stringify(value);\n        } catch {\n            return null;\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"s\u1eed-d\u1ee5ng-trong-migration",children:"S\u1eed d\u1ee5ng trong Migration"}),"\n",(0,t.jsx)(n.h3,{id:"t\u1ea1o-table-v\u1edbi-transformers",children:"T\u1ea1o Table v\u1edbi Transformers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { MigrationInterface, QueryRunner } from \'typeorm\';\n\nexport class CreateUsersTable implements MigrationInterface {\n    public async up(queryRunner: QueryRunner): Promise<void> {\n        await queryRunner.query(`\n      CREATE TABLE "users" (\n        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),\n        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n        "deletedAt" TIMESTAMP WITH TIME ZONE,\n        "email" character varying(255) NOT NULL,\n        "isActive" integer NOT NULL DEFAULT 1,\n        "score" decimal(5,2),\n        CONSTRAINT "PK_users" PRIMARY KEY ("id")\n      )\n    `);\n    }\n\n    public async down(queryRunner: QueryRunner): Promise<void> {\n        await queryRunner.query(\'DROP TABLE "users"\');\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"l\u01b0u-\xfd-migration",children:"L\u01b0u \xfd Migration"}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Migration Compatibility"}),": Khi s\u1eed d\u1ee5ng transformers, \u0111\u1ea3m b\u1ea3o migration t\u1ea1o \u0111\xfang column types m\xe0 transformers mong \u0111\u1ee3i."]})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use for Legacy Systems"}),": BooleanTransformer \u0111\u1eb7c bi\u1ec7t h\u1eefu \xedch khi l\xe0m vi\u1ec7c v\u1edbi legacy databases s\u1eed d\u1ee5ng 0/1."]})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Null Handling"}),": Lu\xf4n x\u1eed l\xfd null/undefined values trong transformers \u0111\u1ec3 tr\xe1nh runtime errors."]})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Validation"}),": S\u1eed d\u1ee5ng NumericTransformer \u0111\u1ec3 validate v\xe0 clean user input data."]})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Performance"}),": Transformers \u0111\u01b0\u1ee3c g\u1ecdi cho m\u1ed7i field, tr\xe1nh logic ph\u1ee9c t\u1ea1p trong transformers."]})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type Safety"}),": Transformers gi\xfap maintain type safety khi l\xe0m vi\u1ec7c v\u1edbi databases c\xf3 type system kh\xe1c JavaScript."]})}),"\n",(0,t.jsx)(n.h2,{id:"v\xed-d\u1ee5-ho\xe0n-ch\u1ec9nh",children:"V\xed d\u1ee5 ho\xe0n ch\u1ec9nh"}),"\n",(0,t.jsx)(n.h3,{id:"user-entity-v\u1edbi-transformers",children:"User Entity v\u1edbi Transformers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Entity, Column, OneToMany } from 'typeorm';\nimport { BooleanTransformer, NumericTransformer } from '@ecom-co/orm';\nimport { OrmBaseEntity } from '@ecom-co/orm';\nimport { Product } from './product.entity';\n\n@Entity('users')\nexport class User extends OrmBaseEntity {\n    @Column({\n        type: 'varchar',\n        length: 255,\n        unique: true,\n    })\n    email!: string;\n\n    @Column({\n        type: 'int',\n        transformer: new BooleanTransformer(),\n        default: 1,\n        comment: 'User active status (1=active, 0=inactive)',\n    })\n    isActive!: boolean;\n\n    @Column({\n        type: 'decimal',\n        precision: 5,\n        scale: 2,\n        transformer: new NumericTransformer(),\n        nullable: true,\n        comment: 'User rating score (0.00-100.00)',\n    })\n    rating?: number | null;\n\n    @Column({\n        type: 'int',\n        transformer: new BooleanTransformer(),\n        default: 0,\n        comment: 'Email verification status (1=verified, 0=unverified)',\n    })\n    isEmailVerified!: boolean;\n\n    @OneToMany(() => Product, (product) => product.user)\n    products?: Product[];\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"product-entity-v\u1edbi-transformers",children:"Product Entity v\u1edbi Transformers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Entity, Column, ManyToOne } from 'typeorm';\nimport { NumericTransformer, BooleanTransformer } from '@ecom-co/orm';\nimport { OrmBaseEntity } from '@ecom-co/orm';\nimport { User } from './user.entity';\n\n@Entity('products')\nexport class Product extends OrmBaseEntity {\n    @Column({\n        type: 'varchar',\n        length: 255,\n    })\n    name!: string;\n\n    @Column({\n        type: 'decimal',\n        precision: 10,\n        scale: 2,\n        transformer: new NumericTransformer(),\n        comment: 'Product price',\n    })\n    price!: number;\n\n    @Column({\n        type: 'int',\n        transformer: new BooleanTransformer(),\n        default: 1,\n        comment: 'Product availability (1=available, 0=unavailable)',\n    })\n    isAvailable!: boolean;\n\n    @Column({\n        type: 'decimal',\n        precision: 3,\n        scale: 2,\n        transformer: new NumericTransformer(),\n        nullable: true,\n        comment: 'Discount percentage (0.00-1.00)',\n    })\n    discount?: number | null;\n\n    @ManyToOne(() => User, (user) => user.products)\n    user!: User;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"s\u1eed-d\u1ee5ng-trong-service",children:"S\u1eed d\u1ee5ng trong Service"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Injectable } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { User, Product } from '@ecom-co/orm';\n\n@Injectable()\nexport class UserService {\n    constructor(\n        @InjectRepository(User)\n        private userRepo: Repository<User>,\n    ) {}\n\n    async createUser(email: string, rating?: number): Promise<User> {\n        const user = this.userRepo.create({\n            email,\n            rating, // NumericTransformer s\u1ebd x\u1eed l\xfd validation\n            isActive: true, // BooleanTransformer s\u1ebd chuy\u1ec3n th\xe0nh 1\n            isEmailVerified: false, // BooleanTransformer s\u1ebd chuy\u1ec3n th\xe0nh 0\n        });\n\n        return this.userRepo.save(user);\n    }\n\n    async updateUserStatus(id: string, isActive: boolean): Promise<User> {\n        // BooleanTransformer s\u1ebd chuy\u1ec3n boolean th\xe0nh 0/1\n        return this.userRepo.save({ id, isActive });\n    }\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);