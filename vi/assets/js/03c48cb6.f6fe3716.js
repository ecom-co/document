"use strict";(self.webpackChunktemplate_docs=self.webpackChunktemplate_docs||[]).push([[4010],{1744:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>x,frontMatter:()=>l,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"microservices/communication/event-driven","title":"Event-Driven Communication","description":"Event-Driven Communication gi\u1ed1ng nh\u01b0 \\"h\u1ec7 th\u1ed1ng th\xf4ng b\xe1o\\" - services publish events v\xe0 services kh\xe1c subscribe \u0111\u1ec3 ph\u1ea3n \u1ee9ng, t\u1ea1o ra h\u1ec7 th\u1ed1ng loose coupling v\xe0 reactive.","source":"@site/docs/microservices/communication/event-driven.md","sourceDirName":"microservices/communication","slug":"/microservices/communication/event-driven","permalink":"/document/vi/docs/microservices/communication/event-driven","draft":false,"unlisted":false,"editUrl":"https://github.com/ecom-co/document/tree/main/docs/microservices/communication/event-driven.md","tags":[],"version":"current","frontMatter":{"id":"event-driven","title":"Event-Driven Communication","sidebar_label":"Event-Driven Communication"},"sidebar":"tutorialSidebar","previous":{"title":"WebSockets","permalink":"/document/vi/docs/microservices/communication/websockets"},"next":{"title":"Service Discovery","permalink":"/document/vi/docs/microservices/service-discovery"}}');var t=s(4848),r=s(8453);const l={id:"event-driven",title:"Event-Driven Communication",sidebar_label:"Event-Driven Communication"},c="Event-Driven Communication",o={},h=[{value:"Event-Driven Communication l\xe0 g\xec?",id:"event-driven-communication-l\xe0-g\xec",level:2},{value:"Khi n\xe0o n\xean d\xf9ng v\xe0 khi n\xe0o kh\xf4ng n\xean d\xf9ng Event-Driven Communication",id:"khi-n\xe0o-n\xean-d\xf9ng-v\xe0-khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-event-driven-communication",level:2},{value:"<strong>Khi n\xe0o N\xcaN d\xf9ng Event-Driven Communication:</strong>",id:"khi-n\xe0o-n\xean-d\xf9ng-event-driven-communication",level:3},{value:"<strong>Khi n\xe0o KH\xd4NG N\xcaN d\xf9ng Event-Driven Communication:</strong>",id:"khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-event-driven-communication",level:3},{value:"C\xe1ch \xe1p d\u1ee5ng Event-Driven Communication hi\u1ec7u qu\u1ea3",id:"c\xe1ch-\xe1p-d\u1ee5ng-event-driven-communication-hi\u1ec7u-qu\u1ea3",level:2},{value:"<strong>1. Chi\u1ebfn l\u01b0\u1ee3c \xe1p d\u1ee5ng (Adoption Strategy):</strong>",id:"1-chi\u1ebfn-l\u01b0\u1ee3c-\xe1p-d\u1ee5ng-adoption-strategy",level:3},{value:"<strong>2. Best Practices khi \xe1p d\u1ee5ng:</strong>",id:"2-best-practices-khi-\xe1p-d\u1ee5ng",level:3},{value:"<strong>3. Common Pitfalls v\xe0 c\xe1ch tr\xe1nh:</strong>",id:"3-common-pitfalls-v\xe0-c\xe1ch-tr\xe1nh",level:3},{value:"Ki\u1ebfn tr\xfac Event-Driven Communication",id:"ki\u1ebfn-tr\xfac-event-driven-communication",level:2},{value:"<strong>1. Event Flow - L\xfd thuy\u1ebft v\xe0 Quy tr\xecnh</strong>",id:"1-event-flow---l\xfd-thuy\u1ebft-v\xe0-quy-tr\xecnh",level:3},{value:"**2. <strong>Event Flow</strong>",id:"2-event-flow",level:3},{value:"<strong>3. Event Types - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"3-event-types---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**4. <strong>Event Types</strong>",id:"4-event-types",level:3},{value:"NestJS Implementation",id:"nestjs-implementation",level:2},{value:"<strong>1. Event Emitter Setup - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"1-event-emitter-setup---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**2. <strong>Event Emitter Setup</strong>",id:"2-event-emitter-setup",level:3},{value:"<strong>3. Event Definitions - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"3-event-definitions---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**4. <strong>Event Definitions</strong>",id:"4-event-definitions",level:3},{value:"Event-Driven Patterns",id:"event-driven-patterns",level:2},{value:"<strong>1. Event Sourcing - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"1-event-sourcing---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**5. <strong>Event Sourcing Pattern</strong>",id:"5-event-sourcing-pattern",level:3},{value:"<strong>2. CQRS - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh</strong>",id:"2-cqrs---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",level:3},{value:"**6. <strong>CQRS Pattern</strong>",id:"6-cqrs-pattern",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"<strong>1. Event Design - L\xfd thuy\u1ebft v\xe0 Nguy\xean t\u1eafc</strong>",id:"1-event-design---l\xfd-thuy\u1ebft-v\xe0-nguy\xean-t\u1eafc",level:3},{value:"<strong>2. Event Handling - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c</strong>",id:"2-event-handling---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",level:3},{value:"<strong>3. Performance Optimization - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c</strong>",id:"3-performance-optimization---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",level:3},{value:"So s\xe1nh v\u1edbi c\xe1c Protocol kh\xe1c",id:"so-s\xe1nh-v\u1edbi-c\xe1c-protocol-kh\xe1c",level:2},{value:"<strong>1. Event-Driven vs Message Queues:</strong>",id:"1-event-driven-vs-message-queues",level:3},{value:"<strong>2. Event-Driven vs REST:</strong>",id:"2-event-driven-vs-rest",level:3},{value:"<strong>3. Event-Driven vs gRPC:</strong>",id:"3-event-driven-vs-grpc",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"event-driven-communication",children:"Event-Driven Communication"})}),"\n",(0,t.jsx)(e.admonition,{title:"\ud83d\udca1 Kh\xe1i ni\u1ec7m c\u01a1 b\u1ea3n",type:"tip",children:(0,t.jsx)(e.p,{children:'Event-Driven Communication gi\u1ed1ng nh\u01b0 "h\u1ec7 th\u1ed1ng th\xf4ng b\xe1o" - services publish events v\xe0 services kh\xe1c subscribe \u0111\u1ec3 ph\u1ea3n \u1ee9ng, t\u1ea1o ra h\u1ec7 th\u1ed1ng loose coupling v\xe0 reactive.'})}),"\n",(0,t.jsx)(e.h2,{id:"event-driven-communication-l\xe0-g\xec",children:"Event-Driven Communication l\xe0 g\xec?"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft c\u01a1 b\u1ea3n:"}),"\nEvent-Driven Communication l\xe0 m\u1ed9t architectural pattern n\u01a1i services giao ti\u1ebfp th\xf4ng qua events. Services kh\xf4ng g\u1ecdi tr\u1ef1c ti\u1ebfp nhau m\xe0 publish events v\xe0 subscribe v\xe0o events m\xe0 h\u1ecd quan t\xe2m. \u0110\xe2y l\xe0 pattern c\xf3 \u0111\u1ed9 coupling th\u1ea5p nh\u1ea5t v\xe0 high scalability."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Publishing"}),": Services publish events v\u1ec1 actions"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Subscription"}),": Services subscribe v\xe0o events quan t\xe2m"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Loose Coupling"}),": Services kh\xf4ng bi\u1ebft nhau tr\u1ef1c ti\u1ebfp"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Asynchronous"}),": Events \u0111\u01b0\u1ee3c x\u1eed l\xfd asynchronously"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Bus"}),": Central event broker qu\u1ea3n l\xfd events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Reactive Programming"}),": Services ph\u1ea3n \u1ee9ng v\u1edbi events"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Creation"}),": Service t\u1ea1o event v\u1ec1 m\u1ed9t action"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Publishing"}),": Service publish event \u0111\u1ebfn event bus"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Distribution"}),": Event bus distribute event \u0111\u1ebfn subscribers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Handling"}),": Subscribers x\u1eed l\xfd events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Processing"}),": Business logic \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event State"}),": Created \u2192 Published \u2192 Distributed \u2192 Processed \u2192 Completed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Service State"}),": Active \u2192 Publishing \u2192 Active \u2192 Subscribing \u2192 Processing \u2192 Active"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"System State"}),": Stable \u2192 Event Cascade \u2192 Processing \u2192 Stable"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110i\u1ec3m m\u1ea1nh (Strengths):"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Loose Coupling"}),": Services kh\xf4ng bi\u1ebft nhau tr\u1ef1c ti\u1ebfp"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"High Scalability"}),": D\u1ec5 d\xe0ng scale services"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Flexibility"}),": D\u1ec5 d\xe0ng th\xeam/b\u1edbt services"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Reactive"}),": Services ph\u1ea3n \u1ee9ng v\u1edbi events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Sourcing"}),": Support event sourcing pattern"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"CQRS Support"}),": Support Command Query Responsibility Segregation"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Audit Trail"}),": Complete audit trail c\u1ee7a events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Asynchronous"}),": Asynchronous processing"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110i\u1ec3m y\u1ebfu (Weaknesses):"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Complexity"}),": Architecture ph\u1ee9c t\u1ea1p"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Ordering"}),": Kh\xf3 \u0111\u1ea3m b\u1ea3o th\u1ee9 t\u1ef1 events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Debugging"}),": Kh\xf3 debug event flow"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance Overhead"}),": Event routing overhead"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Versioning"}),": Complex event versioning"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Data Consistency"}),": Kh\xf3 \u0111\u1ea3m b\u1ea3o data consistency"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Testing Complexity"}),": Complex testing scenarios"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Monitoring Difficulty"}),": Kh\xf3 monitor event flow"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"khi-n\xe0o-n\xean-d\xf9ng-v\xe0-khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-event-driven-communication",children:"Khi n\xe0o n\xean d\xf9ng v\xe0 khi n\xe0o kh\xf4ng n\xean d\xf9ng Event-Driven Communication"}),"\n",(0,t.jsx)(e.h3,{id:"khi-n\xe0o-n\xean-d\xf9ng-event-driven-communication",children:(0,t.jsx)(e.strong,{children:"Khi n\xe0o N\xcaN d\xf9ng Event-Driven Communication:"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"1. Complex Workflows:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-step Processes"}),": Complex business workflows"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Saga Pattern"}),": Distributed transaction management"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Workflow Orchestration"}),": Business process orchestration"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Chaining"}),": Events trigger other events"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"2. Loose Coupling Requirements:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Microservices Architecture"}),": Loose coupling gi\u1eefa services"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Independent Services"}),": Services c\u1ea7n \u0111\u1ed9c l\u1eadp"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Service Evolution"}),": Services evolve independently"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Technology Diversity"}),": Different technologies"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"3. Reactive Systems:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Real-time Systems"}),": Real-time event processing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"IoT Applications"}),": Device event processing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Streaming Applications"}),": Data streaming"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Processing"}),": Complex event processing"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"4. Audit & Compliance:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Audit Requirements"}),": Complete audit trail"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Compliance Needs"}),": Regulatory compliance"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Data Lineage"}),": Track data lineage"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Historical Analysis"}),": Historical data analysis"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"khi-n\xe0o-kh\xf4ng-n\xean-d\xf9ng-event-driven-communication",children:(0,t.jsx)(e.strong,{children:"Khi n\xe0o KH\xd4NG N\xcaN d\xf9ng Event-Driven Communication:"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"1. Simple CRUD Operations:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Basic APIs"}),": Simple CRUD operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Direct Communication"}),": Services c\u1ea7n g\u1ecdi tr\u1ef1c ti\u1ebfp"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Simple Workflows"}),": Basic business processes"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Low Complexity"}),": Kh\xf4ng c\u1ea7n complex event handling"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"2. Synchronous Requirements:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Immediate Response"}),": C\u1ea7n response ngay l\u1eadp t\u1ee9c"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Synchronous Operations"}),": Operations c\u1ea7n synchronous"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Real-time Validation"}),": Real-time validation"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Immediate Consistency"}),": C\u1ea7n consistency ngay l\u1eadp t\u1ee9c"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"3. Performance Critical:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Low Latency"}),": C\u1ea7n latency th\u1ea5p"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"High Throughput"}),": High throughput requirements"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Resource Constraints"}),": Limited resources"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Simple Communication"}),": Simple communication needs"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"4. Data Consistency Requirements:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"ACID Transactions"}),": C\u1ea7n ACID compliance"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Immediate Consistency"}),": C\u1ea7n consistency ngay l\u1eadp t\u1ee9c"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Data Integrity"}),": Critical data integrity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Synchronous Validation"}),": C\u1ea7n validate ngay l\u1eadp t\u1ee9c"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"c\xe1ch-\xe1p-d\u1ee5ng-event-driven-communication-hi\u1ec7u-qu\u1ea3",children:"C\xe1ch \xe1p d\u1ee5ng Event-Driven Communication hi\u1ec7u qu\u1ea3"}),"\n",(0,t.jsx)(e.h3,{id:"1-chi\u1ebfn-l\u01b0\u1ee3c-\xe1p-d\u1ee5ng-adoption-strategy",children:(0,t.jsx)(e.strong,{children:"1. Chi\u1ebfn l\u01b0\u1ee3c \xe1p d\u1ee5ng (Adoption Strategy):"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Phase 1: Assessment & Planning"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Analysis"}),": Analyze business events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Design"}),": Design event structure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Flow"}),": Plan event flow"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Technology Selection"}),": Choose event bus technology"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Phase 2: Implementation"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Bus Setup"}),": Setup event bus infrastructure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Publishers"}),": Implement event publishers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Handlers"}),": Implement event handlers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Implement event routing"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Phase 3: Testing & Deployment"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Testing"}),": Test event flow"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Integration Testing"}),": Test end-to-end scenarios"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance Testing"}),": Load testing v\xe0 optimization"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Gradual Rollout"}),": Deploy t\u1eebng b\u01b0\u1edbc"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-best-practices-khi-\xe1p-d\u1ee5ng",children:(0,t.jsx)(e.strong,{children:"2. Best Practices khi \xe1p d\u1ee5ng:"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Event Design:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Naming"}),": Consistent event naming convention"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Versioning"}),": Implement event versioning"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Schema"}),": Define event schema"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Validation"}),": Validate event data"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Event Handling:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Idempotency"}),": Ensure idempotent operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Error Handling"}),": Proper error handling"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Ordering"}),": Handle event ordering"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Dead Letter Queues"}),": Implement dead letter queues"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Performance Optimization:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Batching"}),": Batch events when possible"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Filtering"}),": Filter events at source"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Optimize event routing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Storage"}),": Optimize event storage"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-common-pitfalls-v\xe0-c\xe1ch-tr\xe1nh",children:(0,t.jsx)(e.strong,{children:"3. Common Pitfalls v\xe0 c\xe1ch tr\xe1nh:"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Design Issues:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c Complex Events"}),": Events qu\xe1 ph\u1ee9c t\u1ea1p"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c No Versioning"}),": Kh\xf4ng c\xf3 event versioning"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c Poor Naming"}),": Event naming kh\xf4ng nh\u1ea5t qu\xe1n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c No Schema"}),": Kh\xf4ng c\xf3 event schema"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Performance Issues:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c No Batching"}),": Kh\xf4ng batch events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c No Filtering"}),": Kh\xf4ng filter events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c Poor Routing"}),": Event routing kh\xf4ng t\u1ed1i \u01b0u"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u274c No Monitoring"}),": Kh\xf4ng monitor event flow"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u2705 C\xe1ch tr\xe1nh:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Design First"}),": Thi\u1ebft k\u1ebf event structure tr\u01b0\u1edbc"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Plan for Scale"}),": Plan scaling t\u1eeb \u0111\u1ea7u"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Monitor Everything"}),": Monitor t\u1ea5t c\u1ea3 aspects"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Test Thoroughly"}),": Test \u0111\u1ea7y \u0111\u1ee7 c\xe1c scenarios"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"ki\u1ebfn-tr\xfac-event-driven-communication",children:"Ki\u1ebfn tr\xfac Event-Driven Communication"}),"\n",(0,t.jsx)(e.h3,{id:"1-event-flow---l\xfd-thuy\u1ebft-v\xe0-quy-tr\xecnh",children:(0,t.jsx)(e.strong,{children:"1. Event Flow - L\xfd thuy\u1ebft v\xe0 Quy tr\xecnh"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Event Flow:"}),"\nEvent flow m\xf4 t\u1ea3 c\xe1ch events di chuy\u1ec3n t\u1eeb publishers \u0111\u1ebfn subscribers th\xf4ng qua event bus. Flow n\xe0y \u0111\u1ea3m b\u1ea3o loose coupling v\xe0 reliable event delivery."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unidirectional Flow"}),": Events flow t\u1eeb publishers \u0111\u1ebfn subscribers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Bus"}),": Central event routing v\xe0 management"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Distribution"}),": Distribute events \u0111\u1ebfn subscribers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Processing"}),": Process events asynchronously"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Creation"}),": Publisher t\u1ea1o event"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Publishing"}),": Publisher publish event \u0111\u1ebfn event bus"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Event bus route event \u0111\u1ebfn subscribers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Processing"}),": Subscribers process events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Completion"}),": Event processing completed"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event State"}),": Created \u2192 Published \u2192 Routed \u2192 Processing \u2192 Completed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Bus State"}),": Idle \u2192 Routing \u2192 Distributing \u2192 Idle"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Processing State"}),": Pending \u2192 Active \u2192 Completed \u2192 Failed"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Loose Coupling"}),": Publishers v\xe0 subscribers kh\xf4ng bi\u1ebft nhau"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Scalability"}),": D\u1ec5 d\xe0ng scale services"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Flexibility"}),": Flexible event handling"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Reliability"}),": Reliable event delivery"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Complexity"}),": Event flow ph\u1ee9c t\u1ea1p"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Ordering"}),": Kh\xf3 \u0111\u1ea3m b\u1ea3o event ordering"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Debugging"}),": Kh\xf3 debug event flow"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance"}),": Event routing overhead"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"2-event-flow",children:["**2. ",(0,t.jsx)(e.strong,{children:"Event Flow"})]}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart TD\n    A[Service A] --\x3e|Publish Event| B[Event Bus]\n    C[Service B] --\x3e|Publish Event| B\n    D[Service C] --\x3e|Publish Event| B\n    \n    B --\x3e|Route Event| E[Subscriber 1]\n    B --\x3e|Route Event| F[Subscriber 2]\n    B --\x3e|Route Event| G[Subscriber 3]\n    B --\x3e|Route Event| H[Subscriber 4]\n    \n    E --\x3e|Process Event| I[Processing 1]\n    F --\x3e|Process Event| J[Processing 2]\n    G --\x3e|Process Event| K[Processing 3]\n    H --\x3e|Process Event| L[Processing 4]\n    \n    I --\x3e|Complete| M[Event Completed]\n    J --\x3e|Complete| M\n    K --\x3e|Complete| M\n    L --\x3e|Complete| M\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0\n    style K fill:#fce4ec\n    style L fill:#f1f8e9\n    style M fill:#c8e6c9"}),"\n",(0,t.jsx)(e.h3,{id:"3-event-types---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,t.jsx)(e.strong,{children:"3. Event Types - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Event Types:"}),"\nEvent types \u0111\u1ecbnh ngh\u0129a c\xe1c lo\u1ea1i events kh\xe1c nhau trong system. M\u1ed7i event type c\xf3 structure v\xe0 purpose ri\xeang bi\u1ec7t."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Domain Events"}),": Business domain events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Integration Events"}),": System integration events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Infrastructure Events"}),": Infrastructure events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Custom Events"}),": Custom business events"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Classification"}),": Classify events theo type"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Structure"}),": Define event structure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Validation"}),": Validate event data"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Route events theo type"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event State"}),": Classified \u2192 Structured \u2192 Validated \u2192 Routed \u2192 Processed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Type State"}),": Identified \u2192 Defined \u2192 Validated \u2192 Active"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Routing State"}),": Pending \u2192 Routing \u2192 Routed \u2192 Completed"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Organization"}),": Organize events theo type"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Type Safety"}),": Type-safe event handling"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Validation"}),": Validate events theo type"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Route events theo type"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Type Complexity"}),": Event type complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Type Management"}),": Manage event types"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Type Evolution"}),": Handle type evolution"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"4-event-types",children:["**4. ",(0,t.jsx)(e.strong,{children:"Event Types"})]}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart TD\n    A[Event Types] --\x3e B[Domain Events]\n    A --\x3e C[Integration Events]\n    A --\x3e D[Infrastructure Events]\n    A --\x3e E[Custom Events]\n    \n    B --\x3e F[User Created]\n    B --\x3e G[Order Placed]\n    B --\x3e H[Payment Processed]\n    \n    C --\x3e I[Service Call]\n    C --\x3e J[Data Sync]\n    C --\x3e K[API Update]\n    \n    D --\x3e L[System Health]\n    D --\x3e M[Resource Usage]\n    D --\x3e N[Performance Metrics]\n    \n    E --\x3e O[Business Rule]\n    E --\x3e P[Workflow Step]\n    E --\x3e Q[Custom Logic]\n    \n    style A fill:#e3f2fd\n    style B fill:#e8f5e8\n    style C fill:#f3e5f5\n    style D fill:#fff3e0\n    style E fill:#fce4ec\n    style F fill:#f1f8e9\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0\n    style K fill:#fce4ec\n    style L fill:#f1f8e9\n    style M fill:#fff8e1\n    style N fill:#e8f5e8\n    style O fill:#f3e5f5\n    style P fill:#fff3e0\n    style Q fill:#fce4ec"}),"\n",(0,t.jsx)(e.h2,{id:"nestjs-implementation",children:"NestJS Implementation"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Event-Driven Communication trong NestJS:"}),"\nNestJS cung c\u1ea5p built-in support cho event-driven communication th\xf4ng qua ",(0,t.jsx)(e.code,{children:"@nestjs/event-emitter"})," package. N\xf3 cho ph\xe9p b\u1ea1n publish v\xe0 subscribe events m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Emitter"}),": Built-in event emitter"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Decorators"}),": S\u1eed d\u1ee5ng ",(0,t.jsx)(e.code,{children:"@OnEvent()"})," decorator"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Publishing"}),": Publish events v\u1edbi ",(0,t.jsx)(e.code,{children:"EventEmitter2"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Handling"}),": Handle events v\u1edbi event handlers"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Emitter Setup"}),": Setup event emitter"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Publishing"}),": Publish events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Subscription"}),": Subscribe v\xe0o events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Handling"}),": Handle events"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Emitter State"}),": Uninitialized \u2192 Initialized \u2192 Active \u2192 Publishing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event State"}),": Created \u2192 Published \u2192 Distributed \u2192 Handled"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Handler State"}),": Unregistered \u2192 Registered \u2192 Active \u2192 Processing"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Native Integration"}),": T\xedch h\u1ee3p t\u1ed1t v\u1edbi NestJS"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Decorators"}),": S\u1eed d\u1ee5ng decorators"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Type Safety"}),": TypeScript support"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Easy Testing"}),": D\u1ec5 d\xe0ng test"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Learning Curve"}),": C\u1ea7n hi\u1ec3u event concepts"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Complexity"}),": Event handling complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"State Management"}),": Event state management"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"1-event-emitter-setup---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,t.jsx)(e.strong,{children:"1. Event Emitter Setup - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Event Emitter Setup:"}),"\nEvent Emitter Setup trong NestJS li\xean quan \u0111\u1ebfn vi\u1ec7c c\u1ea5u h\xecnh event emitter v\xe0 thi\u1ebft l\u1eadp event infrastructure. N\xf3 cho ph\xe9p services publish v\xe0 subscribe events."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Emitter Configuration"}),": Configure event emitter"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Bus Setup"}),": Setup event bus"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Configure event routing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Storage"}),": Configure event storage"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Configuration"}),": Configure event emitter"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Bus Setup"}),": Setup event bus"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Configure routing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Storage"}),": Configure storage"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Configuration State"}),": Unconfigured \u2192 Configured \u2192 Active"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Bus State"}),": Uninitialized \u2192 Initialized \u2192 Active"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Routing State"}),": Unconfigured \u2192 Configured \u2192 Active"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Flexible Configuration"}),": Flexible configuration options"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Configurable event routing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Storage"}),": Configurable event storage"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance Tuning"}),": Performance tuning options"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Configuration Complexity"}),": Configuration complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Setup Overhead"}),": Setup overhead"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Configuration Management"}),": Manage configurations"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"2-event-emitter-setup",children:["**2. ",(0,t.jsx)(e.strong,{children:"Event Emitter Setup"})]}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart TD\n    A[Event Emitter Config] --\x3e|Initialize| B[Event Bus]\n    B --\x3e|Setup| C[Event Router]\n    B --\x3e|Setup| D[Event Storage]\n    \n    C --\x3e|Configure| E[Routing Rules]\n    D --\x3e|Configure| F[Storage Options]\n    \n    G[Event Publishers] --\x3e|Publish| B\n    H[Event Subscribers] --\x3e|Subscribe| B\n    \n    B --\x3e|Route Events| I[Event Distribution]\n    B --\x3e|Store Events| J[Event Persistence]\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0"}),"\n",(0,t.jsx)(e.h3,{id:"3-event-definitions---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,t.jsx)(e.strong,{children:"3. Event Definitions - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Event Definitions:"}),"\nEvent Definitions \u0111\u1ecbnh ngh\u0129a c\u1ea5u tr\xfac v\xe0 properties c\u1ee7a events. Ch\xfang \u0111\u1ea3m b\u1ea3o type safety v\xe0 consistency trong event handling."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Structure"}),": Define event structure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Properties"}),": Define event properties"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Validation"}),": Validate event data"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Versioning"}),": Handle event versioning"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Design"}),": Design event structure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Property Definition"}),": Define event properties"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Validation Rules"}),": Define validation rules"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Version Management"}),": Manage event versions"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event State"}),": Designed \u2192 Defined \u2192 Validated \u2192 Versioned"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Property State"}),": Identified \u2192 Defined \u2192 Validated \u2192 Active"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Version State"}),": Created \u2192 Versioned \u2192 Active \u2192 Deprecated"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Type Safety"}),": Type-safe event handling"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Validation"}),": Validate event data"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Consistency"}),": Consistent event structure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Evolution"}),": Handle event evolution"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Definition Complexity"}),": Event definition complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Version Management"}),": Version management complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Validation Overhead"}),": Validation overhead"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"4-event-definitions",children:["**4. ",(0,t.jsx)(e.strong,{children:"Event Definitions"})]}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart LR\n    A[Event Definitions] --\x3e B[User Events]\n    A --\x3e C[Order Events]\n    A --\x3e D[Payment Events]\n    A --\x3e E[System Events]\n    \n    B --\x3e F[UserCreated]\n    B --\x3e G[UserUpdated]\n    B --\x3e H[UserDeleted]\n    \n    C --\x3e I[OrderPlaced]\n    C --\x3e J[OrderShipped]\n    C --\x3e K[OrderDelivered]\n    \n    D --\x3e L[PaymentProcessed]\n    D --\x3e M[PaymentFailed]\n    D --\x3e N[PaymentRefunded]\n    \n    E --\x3e O[SystemHealth]\n    E --\x3e P[ResourceUsage]\n    E --\x3e Q[PerformanceMetrics]\n    \n    style A fill:#e3f2fd\n    style B fill:#e8f5e8\n    style C fill:#f3e5f5\n    style D fill:#fff3e0\n    style E fill:#fce4ec\n    style F fill:#f1f8e9\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0\n    style K fill:#fce4ec\n    style L fill:#f1f8e9\n    style M fill:#fff8e1\n    style N fill:#e8f5e8\n    style O fill:#f3e5f5\n    style P fill:#fff3e0\n    style Q fill:#fce4ec"}),"\n",(0,t.jsx)(e.h2,{id:"event-driven-patterns",children:"Event-Driven Patterns"}),"\n",(0,t.jsx)(e.h3,{id:"1-event-sourcing---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,t.jsx)(e.strong,{children:"1. Event Sourcing - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 Event Sourcing:"}),"\nEvent Sourcing l\xe0 m\u1ed9t pattern l\u01b0u tr\u1eef t\u1ea5t c\u1ea3 changes nh\u01b0 events thay v\xec ch\u1ec9 l\u01b0u current state. Pattern n\xe0y cho ph\xe9p reconstruct state v\xe0 provide audit trail."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Store"}),": Store t\u1ea5t c\u1ea3 events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"State Reconstruction"}),": Reconstruct state t\u1eeb events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Audit Trail"}),": Complete audit trail"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Replay"}),": Replay events"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Creation"}),": Create events cho m\u1ecdi change"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Storage"}),": Store events trong event store"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"State Reconstruction"}),": Reconstruct state t\u1eeb events"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Replay"}),": Replay events khi c\u1ea7n"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event State"}),": Created \u2192 Stored \u2192 Reconstructed \u2192 Replayed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"State State"}),": Current \u2192 Reconstructed \u2192 Historical"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Store State"}),": Empty \u2192 Storing \u2192 Stored \u2192 Replaying"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Complete History"}),": Complete change history"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Audit Trail"}),": Complete audit trail"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"State Reconstruction"}),": Reconstruct any state"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Replay"}),": Replay events"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Storage Requirements"}),": High storage requirements"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Complexity"}),": Implementation complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance Impact"}),": Performance impact"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Query Complexity"}),": Complex queries"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"5-event-sourcing-pattern",children:["**5. ",(0,t.jsx)(e.strong,{children:"Event Sourcing Pattern"})]}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart TD\n    A[User Action] --\x3e|Create Event| B[Event Store]\n    B --\x3e|Store Event| C[Event History]\n    \n    C --\x3e|Reconstruct State| D[Current State]\n    C --\x3e|Replay Events| E[Historical State]\n    \n    F[Event Replay] --\x3e|Replay Events| G[State Reconstruction]\n    G --\x3e|Build State| H[Target State]\n    \n    I[Audit Trail] --\x3e|Query Events| C\n    J[Analytics] --\x3e|Analyze Events| C\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0"}),"\n",(0,t.jsx)(e.h3,{id:"2-cqrs---l\xfd-thuy\u1ebft-v\xe0-th\u1ef1c-h\xe0nh",children:(0,t.jsx)(e.strong,{children:"2. CQRS - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"L\xfd thuy\u1ebft v\u1ec1 CQRS:"}),"\nCQRS (Command Query Responsibility Segregation) l\xe0 m\u1ed9t pattern t\xe1ch bi\u1ec7t read v\xe0 write operations. Commands modify state, queries read state."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m k\u1ef9 thu\u1eadt:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Command Side"}),": Handle write operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Query Side"}),": Handle read operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Sourcing"}),": Often used v\u1edbi event sourcing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Separate Models"}),": Separate read v\xe0 write models"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Command Handling"}),": Handle write commands"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Publishing"}),": Publish events v\u1ec1 changes"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"State Update"}),": Update write model"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Query Handling"}),": Handle read queries"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Bi\u1ebfn \u0111\u1ed5i trong qu\xe1 tr\xecnh x\u1eed l\xfd:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Command State"}),": Received \u2192 Validated \u2192 Processed \u2192 Completed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event State"}),": Created \u2192 Published \u2192 Distributed \u2192 Processed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Query State"}),": Received \u2192 Routed \u2192 Executed \u2192 Returned"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Separation of Concerns"}),": Separate read v\xe0 write"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Optimization"}),": Optimize read v\xe0 write separately"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Scalability"}),": Scale read v\xe0 write independently"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Flexibility"}),": Flexible read v\xe0 write models"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Complexity"}),": Implementation complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Consistency"}),": Eventual consistency"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Data Synchronization"}),": Data synchronization complexity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Learning Curve"}),": Steep learning curve"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"6-cqrs-pattern",children:["**6. ",(0,t.jsx)(e.strong,{children:"CQRS Pattern"})]}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart LR\n    A[Client] --\x3e|Command| B[Command Handler]\n    A --\x3e|Query| C[Query Handler]\n    \n    B --\x3e|Process Command| D[Domain Logic]\n    D --\x3e|Publish Event| E[Event Bus]\n    \n    E --\x3e|Route Event| F[Event Handlers]\n    F --\x3e|Update State| G[Write Model]\n    \n    C --\x3e|Execute Query| H[Read Model]\n    H --\x3e|Return Data| A\n    \n    I[Event Store] --\x3e G\n    J[Read Database] --\x3e H\n    \n    style A fill:#e8f5e8\n    style B fill:#f3e5f5\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f1f8e9\n    style F fill:#e3f2fd\n    style G fill:#fff8e1\n    style H fill:#e8f5e8\n    style I fill:#f3e5f5\n    style J fill:#fff3e0"}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(e.h3,{id:"1-event-design---l\xfd-thuy\u1ebft-v\xe0-nguy\xean-t\u1eafc",children:(0,t.jsx)(e.strong,{children:"1. Event Design - L\xfd thuy\u1ebft v\xe0 Nguy\xean t\u1eafc"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nguy\xean t\u1eafc c\u01a1 b\u1ea3n:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Naming"}),": Consistent event naming convention"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Versioning"}),": Implement event versioning"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Schema"}),": Define event schema"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Validation"}),": Validate event data"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Quy t\u1eafc l\u1ef1a ch\u1ecdn:"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Granularity"}),": Choose appropriate event granularity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Structure"}),": Design consistent event structure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Evolution"}),": Plan for event evolution"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Documentation"}),": Document events properly"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Trade-offs c\u1ea7n c\xe2n nh\u1eafc:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Granularity vs Performance"}),": Balance granularity v\xe0 performance"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Structure vs Flexibility"}),": Balance structure v\xe0 flexibility"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Versioning vs Simplicity"}),": Balance versioning v\xe0 simplicity"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-event-handling---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",children:(0,t.jsx)(e.strong,{children:"2. Event Handling - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nguy\xean l\xfd x\u1eed l\xfd Events:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Idempotency"}),": Ensure idempotent operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Error Handling"}),": Handle errors gracefully"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Ordering"}),": Handle event ordering"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Dead Letter Queues"}),": Implement dead letter queues"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Chi\u1ebfn l\u01b0\u1ee3c x\u1eed l\xfd Events:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Processing"}),": Process events efficiently"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Error Recovery"}),": Recover from errors"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Monitoring"}),": Monitor event processing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance Optimization"}),": Optimize performance"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Best Practices:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Ensure Idempotency"}),": Ensure idempotent operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Handle Errors"}),": Handle errors gracefully"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Monitor Events"}),": Monitor event processing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Optimize Performance"}),": Optimize performance"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-performance-optimization---l\xfd-thuy\u1ebft-v\xe0-chi\u1ebfn-l\u01b0\u1ee3c",children:(0,t.jsx)(e.strong,{children:"3. Performance Optimization - L\xfd thuy\u1ebft v\xe0 Chi\u1ebfn l\u01b0\u1ee3c"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nguy\xean l\xfd t\u1ed1i \u01b0u Performance:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Batching"}),": Batch events when possible"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Filtering"}),": Filter events at source"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Routing"}),": Optimize event routing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event Storage"}),": Optimize event storage"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Chi\u1ebfn l\u01b0\u1ee3c t\u1ed1i \u01b0u Performance:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Batching Strategy"}),": Plan batching strategy"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Filtering Strategy"}),": Plan filtering strategy"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Routing Strategy"}),": Plan routing strategy"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Storage Strategy"}),": Plan storage strategy"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Best Practices:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Batch Events"}),": Batch events when possible"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Filter Events"}),": Filter events at source"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Optimize Routing"}),": Optimize event routing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Optimize Storage"}),": Optimize event storage"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"so-s\xe1nh-v\u1edbi-c\xe1c-protocol-kh\xe1c",children:"So s\xe1nh v\u1edbi c\xe1c Protocol kh\xe1c"}),"\n",(0,t.jsx)(e.h3,{id:"1-event-driven-vs-message-queues",children:(0,t.jsx)(e.strong,{children:"1. Event-Driven vs Message Queues:"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Communication Pattern:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Event publishing v\xe0 subscription"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Message Queues"}),": Message queuing v\xe0 processing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Event-Driven l\xe0 pattern, Message Queues l\xe0 implementation"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Event processing, reactive systems"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Message Queues"}),": Task distribution, load balancing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": T\u01b0\u01a1ng t\u1ef1 nhau, kh\xe1c implementation"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Architecture:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Event-driven architecture"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Message Queues"}),": Message queuing architecture"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Event-Driven l\xe0 architectural pattern"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-event-driven-vs-rest",children:(0,t.jsx)(e.strong,{children:"2. Event-Driven vs REST:"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Communication Pattern:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Asynchronous, event-based"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"REST"}),": Synchronous, request-response"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Event-Driven cho async, REST cho sync"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Event processing, reactive systems"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"REST"}),": API calls, simple operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Kh\xe1c nhau, kh\xf4ng thay th\u1ebf \u0111\u01b0\u1ee3c nhau"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Performance:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": High throughput, async"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"REST"}),": Lower latency, sync"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Event-Driven cho throughput, REST cho latency"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-event-driven-vs-grpc",children:(0,t.jsx)(e.strong,{children:"3. Event-Driven vs gRPC:"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Communication Pattern:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Event-based, asynchronous"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"gRPC"}),": RPC-based, synchronous"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Event-Driven cho events, gRPC cho RPC calls"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Event processing, reactive systems"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"gRPC"}),": Service-to-service communication"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Kh\xe1c nhau, kh\xf4ng thay th\u1ebf \u0111\u01b0\u1ee3c nhau"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Performance:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": High throughput, async"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"gRPC"}),": High performance, sync"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": Event-Driven cho throughput, gRPC cho performance"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsxs)(e.admonition,{title:"\ud83d\udca1 L\u1eddi khuy\xean t\u1ed5ng k\u1ebft - L\xfd thuy\u1ebft v\xe0 Th\u1ef1c h\xe0nh",type:"tip",children:[(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Nguy\xean t\u1eafc c\u01a1 b\u1ea3n:"})}),(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Protocol Selection"}),": Event-Driven Communication ph\xf9 h\u1ee3p cho complex workflows v\xe0 loose coupling"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance vs Complexity"}),": Event-Driven c\xf3 high scalability nh\u01b0ng complexity cao"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Coupling vs Flexibility"}),": Event-Driven loose coupling, high flexibility"]}),"\n"]}),(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Quy t\u1eafc th\u1ef1c h\xe0nh:"})}),(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Cho complex workflows, loose coupling, reactive systems"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"REST"}),": Cho simple APIs, CRUD operations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"gRPC"}),": Cho high-performance, service-to-service communication"]}),"\n"]}),(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"L\xfd do t\u1ea1i sao:"})}),(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Event-Driven"}),": Loose coupling, high scalability, reactive"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"REST"}),": Simple, universal, stateless"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"gRPC"}),": High performance, strong typing, streaming"]}),"\n"]}),(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1ch x\u1eed l\xfd bi\u1ebfn \u0111\u1ed5i:"})}),(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"State Management"}),": Event-Driven event-based state, REST stateless, gRPC stateful"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Error Handling"}),": Event-Driven event replay, REST status codes, gRPC error codes"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance Optimization"}),": Event-Driven batching, REST caching, gRPC connection pooling"]}),"\n"]})]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"B\xe0i ti\u1ebfp theo:"})," ",(0,t.jsx)(e.a,{href:"/docs/microservices/service-discovery",children:"Service Discovery"})]})]})}function x(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>l,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function l(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);