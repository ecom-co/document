"use strict";(self.webpackChunktemplate_docs=self.webpackChunktemplate_docs||[]).push([[2951],{11470:(e,n,t)=>{t.d(n,{A:()=>E});var i=t(96540),r=t(34164),s=t(23104),l=t(56347),c=t(205),d=t(57485),o=t(31682),a=t(70679);function h(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,i.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:i}})=>({value:e,label:n,attributes:t,default:i}))}(t);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function x({queryString:e=!1,groupId:n}){const t=(0,l.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(r),(0,i.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})},[r,t])]}function p(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=u(e),[l,d]=(0,i.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s})),[o,h]=x({queryString:t,groupId:r}),[p,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,a.Dv)(n);return[t,(0,i.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),g=(()=>{const e=o??p;return m({value:e,tabValues:s})?e:null})();(0,c.A)(()=>{g&&d(g)},[g]);return{selectedValue:l,selectValue:(0,i.useCallback)(e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);d(e),h(e),j(e)},[h,j,s]),tabValues:s}}var j=t(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=t(74848);function f({className:e,block:n,selectedValue:t,selectValue:i,tabValues:l}){const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),o=e=>{const n=e.currentTarget,r=c.indexOf(n),s=l[r].value;s!==t&&(d(n),i(s))},a=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:l.map(({value:e,label:n,attributes:i})=>(0,y.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{c.push(e)},onKeyDown:a,onClick:o,...i,className:(0,r.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:t}){const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===t);return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function b(e){const n=p(e);return(0,y.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,y.jsx)(f,{...n,...e}),(0,y.jsx)(v,{...n,...e})]})}function E(e){const n=(0,j.A)();return(0,y.jsx)(b,{...e,children:h(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>c});var i=t(96540);const r={},s=i.createContext(r);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}},36373:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"ecom-co/libs/typeorm/docs/entities","title":"Entities \u2014 Base Entity v\xe0 Core Entities","description":"Entities module cung c\u1ea5p base entity v\u1edbi audit trail v\xe0 lifecycle management, c\xf9ng v\u1edbi c\xe1c core entities cho e-commerce platform.","source":"@site/docs/ecom-co/libs/typeorm/docs/entities.md","sourceDirName":"ecom-co/libs/typeorm/docs","slug":"/entities","permalink":"/document/docs/entities","draft":false,"unlisted":false,"editUrl":"https://github.com/ecom-co/document/tree/main/docs/ecom-co/libs/typeorm/docs/entities.md","tags":[{"inline":true,"label":"entities","permalink":"/document/docs/tags/entities"},{"inline":true,"label":"base-entity","permalink":"/document/docs/tags/base-entity"},{"inline":true,"label":"user","permalink":"/document/docs/tags/user"},{"inline":true,"label":"product","permalink":"/document/docs/tags/product"},{"inline":true,"label":"audit","permalink":"/document/docs/tags/audit"},{"inline":true,"label":"lifecycle","permalink":"/document/docs/tags/lifecycle"},{"inline":true,"label":"soft-delete","permalink":"/document/docs/tags/soft-delete"}],"version":"current","frontMatter":{"id":"entities","title":"Entities \u2014 Base Entity v\xe0 Core Entities","sidebar_label":"Entities","slug":"/entities","description":"Entities module cung c\u1ea5p base entity v\u1edbi audit trail v\xe0 lifecycle management, c\xf9ng v\u1edbi c\xe1c core entities cho e-commerce platform.","tags":["entities","base-entity","user","product","audit","lifecycle","soft-delete"]},"sidebar":"tutorialSidebar","previous":{"title":"Data Source","permalink":"/document/docs/data-source"},"next":{"title":"Repository","permalink":"/document/docs/repository"}}');var r=t(74848),s=t(28453);t(11470);const l={id:"entities",title:"Entities \u2014 Base Entity v\xe0 Core Entities",sidebar_label:"Entities",slug:"/entities",description:"Entities module cung c\u1ea5p base entity v\u1edbi audit trail v\xe0 lifecycle management, c\xf9ng v\u1edbi c\xe1c core entities cho e-commerce platform.",tags:["entities","base-entity","user","product","audit","lifecycle","soft-delete"]},c=void 0,d={},o=[{value:"T\u1ed5ng quan",id:"t\u1ed5ng-quan",level:2},{value:"OrmBaseEntity",id:"ormbaseentity",level:2},{value:"C\xe1c tr\u01b0\u1eddng c\u01a1 b\u1ea3n",id:"c\xe1c-tr\u01b0\u1eddng-c\u01a1-b\u1ea3n",level:3},{value:"T\xednh n\u0103ng ch\xednh",id:"t\xednh-n\u0103ng-ch\xednh",level:3},{value:"Lifecycle Management",id:"lifecycle-management",level:3},{value:"Audit Information",id:"audit-information",level:3},{value:"Utility Methods",id:"utility-methods",level:3},{value:"H\u01b0\u1edbng d\u1eabn th\xeam Entity m\u1edbi",id:"h\u01b0\u1edbng-d\u1eabn-th\xeam-entity-m\u1edbi",level:2},{value:"1. T\u1ea1o Entity Class",id:"1-t\u1ea1o-entity-class",level:3},{value:"2. C\u1eadp nh\u1eadt CORE_ENTITIES",id:"2-c\u1eadp-nh\u1eadt-core_entities",level:3},{value:"3. Export t\u1eeb Main Index",id:"3-export-t\u1eeb-main-index",level:3},{value:"4. T\u1ea1o Migration",id:"4-t\u1ea1o-migration",level:3},{value:"5. C\u1eadp nh\u1eadt Seeds",id:"5-c\u1eadp-nh\u1eadt-seeds",level:3},{value:"6. Build v\xe0 Test",id:"6-build-v\xe0-test",level:3},{value:"CORE_ENTITIES",id:"core_entities",level:2},{value:"S\u1eed d\u1ee5ng trong TypeORM Module",id:"s\u1eed-d\u1ee5ng-trong-typeorm-module",level:3},{value:"S\u1eed d\u1ee5ng trong Feature Module",id:"s\u1eed-d\u1ee5ng-trong-feature-module",level:3},{value:"L\xfd thuy\u1ebft v\u1ec1 Entity",id:"l\xfd-thuy\u1ebft-v\u1ec1-entity",level:2},{value:"1. C\u1ea5u tr\xfac Entity",id:"1-c\u1ea5u-tr\xfac-entity",level:3},{value:"2. Quy t\u1eafc \u0111\u1eb7t t\xean",id:"2-quy-t\u1eafc-\u0111\u1eb7t-t\xean",level:3},{value:"3. Column Types",id:"3-column-types",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"T\u1ed5ng k\u1ebft",id:"t\u1ed5ng-k\u1ebft",level:2},{value:"Workflow th\xeam Entity m\u1edbi",id:"workflow-th\xeam-entity-m\u1edbi",level:3},{value:"L\u1ee3i \xedch c\u1ee7a OrmBaseEntity",id:"l\u1ee3i-\xedch-c\u1ee7a-ormbaseentity",level:3}];function a(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"Entities module cung c\u1ea5p h\u1ec7 th\u1ed1ng entities ho\xe0n ch\u1ec9nh v\u1edbi base entity c\xf3 s\u1eb5n audit trail, lifecycle management v\xe0 soft-delete capabilities, c\xf9ng v\u1edbi c\xe1c core entities cho e-commerce platform."})}),"\n",(0,r.jsx)(n.h2,{id:"t\u1ed5ng-quan",children:"T\u1ed5ng quan"}),"\n",(0,r.jsx)(n.p,{children:"Entities module bao g\u1ed3m:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OrmBaseEntity"})," - Abstract base class v\u1edbi audit trail v\xe0 lifecycle management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Entity"})," - Entity qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng v\u1edbi authentication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Product Entity"})," - Entity qu\u1ea3n l\xfd s\u1ea3n ph\u1ea9m"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CORE_ENTITIES"})," - Array ch\u1ee9a t\u1ea5t c\u1ea3 core entities \u0111\u1ec3 d\u1ec5 d\xe0ng \u0111\u0103ng k\xfd"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"ormbaseentity",children:"OrmBaseEntity"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OrmBaseEntity"})," l\xe0 abstract base class m\xe0 t\u1ea5t c\u1ea3 entities kh\xe1c ph\u1ea3i extend. N\xf3 cung c\u1ea5p:"]}),"\n",(0,r.jsx)(n.h3,{id:"c\xe1c-tr\u01b0\u1eddng-c\u01a1-b\u1ea3n",children:"C\xe1c tr\u01b0\u1eddng c\u01a1 b\u1ea3n"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export abstract class OrmBaseEntity extends TypeOrmBaseEntity {\n    @PrimaryGeneratedColumn('uuid')\n    id!: string;\n\n    @CreateDateColumn({ name: 'createdAt', type: 'timestamptz' })\n    createdAt!: Date;\n\n    @UpdateDateColumn({ name: 'updatedAt', type: 'timestamptz' })\n    updatedAt!: Date;\n\n    @DeleteDateColumn({ name: 'deletedAt', type: 'timestamptz', nullable: true })\n    deletedAt?: Date | null;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"t\xednh-n\u0103ng-ch\xednh",children:"T\xednh n\u0103ng ch\xednh"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"T\xednh n\u0103ng"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"}),(0,r.jsx)(n.th,{children:"V\xed d\u1ee5"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"UUID Primary Key"})}),(0,r.jsx)(n.td,{children:"S\u1eed d\u1ee5ng UUID thay v\xec auto-increment"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'id: "550e8400-e29b-41d4-a716-446655440000"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Timestamps"})}),(0,r.jsx)(n.td,{children:"T\u1ef1 \u0111\u1ed9ng qu\u1ea3n l\xfd createdAt v\xe0 updatedAt"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'createdAt: "2024-01-15T10:30:00Z"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Soft Delete"})}),(0,r.jsx)(n.td,{children:"H\u1ed7 tr\u1ee3 x\xf3a m\u1ec1m v\u1edbi deletedAt"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'deletedAt: "2024-01-15T11:00:00Z"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Audit Trail"})}),(0,r.jsx)(n.td,{children:"Theo d\xf5i to\xe0n b\u1ed9 lifecycle c\u1ee7a entity"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getAuditInfo()"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"lifecycle-management",children:"Lifecycle Management"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Ki\u1ec3m tra tr\u1ea1ng th\xe1i entity\nconst isNew = entity.isRecent(); // < 24h\nconst isMature = entity.getLifecycleStage() === 'mature'; // 1-30 ng\xe0y\nconst isOld = entity.isOld(); // > 30 ng\xe0y\n\n// Ki\u1ec3m tra soft delete\nconst isDeleted = entity.isSoftDeleted;\nconst canRestore = entity.deletedAt !== null;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"audit-information",children:"Audit Information"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'const auditInfo = entity.getAuditInfo();\n// K\u1ebft qu\u1ea3:\n// {\n//   id: "550e8400-e29b-41d4-a716-446655440000",\n//   age: "2 days",\n//   isOld: false,\n//   isRecent: false,\n//   isSoftDeleted: false,\n//   lifecycleStage: "mature",\n//   createdAt: "2024-01-13T10:30:00Z",\n//   updatedAt: "2024-01-15T10:30:00Z",\n//   deletedAt: null\n// }\n'})}),"\n",(0,r.jsx)(n.h3,{id:"utility-methods",children:"Utility Methods"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"}),(0,r.jsx)(n.th,{children:"Returns"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getAge()"})}),(0,r.jsx)(n.td,{children:"Tu\u1ed5i entity t\xednh b\u1eb1ng milliseconds"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getAgeString()"})}),(0,r.jsx)(n.td,{children:"Tu\u1ed5i entity d\u1ea1ng human-readable"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isValid()"})}),(0,r.jsx)(n.td,{children:"Ki\u1ec3m tra entity c\xf3 h\u1ee3p l\u1ec7 kh\xf4ng"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"clone()"})}),(0,r.jsx)(n.td,{children:"T\u1ea1o b\u1ea3n sao entity v\u1edbi ID m\u1edbi"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"this"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"merge(data)"})}),(0,r.jsx)(n.td,{children:"Merge data v\xe0o entity"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"this"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"toPlainObject(fields?)"})}),(0,r.jsx)(n.td,{children:"Chuy\u1ec3n entity th\xe0nh plain object"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Record<string, unknown>"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"toPublicObject()"})}),(0,r.jsx)(n.td,{children:"Chuy\u1ec3n entity th\xe0nh public DTO"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Record<string, unknown>"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"h\u01b0\u1edbng-d\u1eabn-th\xeam-entity-m\u1edbi",children:"H\u01b0\u1edbng d\u1eabn th\xeam Entity m\u1edbi"}),"\n",(0,r.jsx)(n.h3,{id:"1-t\u1ea1o-entity-class",children:"1. T\u1ea1o Entity Class"}),"\n",(0,r.jsxs)(n.p,{children:["T\u1ea1o file m\u1edbi trong th\u01b0 m\u1ee5c ",(0,r.jsx)(n.code,{children:"src/entities/core/"})," v\u1edbi t\xean ",(0,r.jsx)(n.code,{children:"[entity-name].entity.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/entities/core/category.entity.ts\nimport { Entity, Column, OneToMany, ManyToOne } from 'typeorm';\nimport { OrmBaseEntity } from '../base.entity';\n\n@Entity({ name: 'categories', comment: 'Product categories' })\nexport class Category extends OrmBaseEntity {\n    @Column({\n        type: 'varchar',\n        length: 100,\n        comment: 'Category name',\n    })\n    name!: string;\n\n    @Column({\n        type: 'text',\n        nullable: true,\n        comment: 'Category description',\n    })\n    description?: string;\n\n    @Column({\n        type: 'int',\n        default: 0,\n        comment: 'Display order',\n    })\n    sortOrder!: number;\n\n    @Column({\n        type: 'boolean',\n        default: true,\n        comment: 'Category visibility',\n    })\n    isActive!: boolean;\n\n    // Relationships\n    @OneToMany(() => Product, (product) => product.category)\n    products?: Product[];\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-c\u1eadp-nh\u1eadt-core_entities",children:"2. C\u1eadp nh\u1eadt CORE_ENTITIES"}),"\n",(0,r.jsxs)(n.p,{children:["Th\xeam entity m\u1edbi v\xe0o ",(0,r.jsx)(n.code,{children:"src/entities/core/index.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/entities/core/index.ts\nexport * from './category.entity';\n\nimport { User } from './user.entity';\nimport { Product } from './product.entity';\nimport { Category } from './category.entity';\n\nexport const CORE_ENTITIES: EntityClassOrSchema[] = [\n    User,\n    Product,\n    Category, // Th\xeam Category entity\n];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-export-t\u1eeb-main-index",children:"3. Export t\u1eeb Main Index"}),"\n",(0,r.jsxs)(n.p,{children:["C\u1eadp nh\u1eadt ",(0,r.jsx)(n.code,{children:"src/entities/index.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/entities/index.ts\nexport * from './core';\nexport * from './category.entity'; // Export Category entity\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-t\u1ea1o-migration",children:"4. T\u1ea1o Migration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Generate migration t\u1eeb entity changes\nnpm run typeorm:generate -- src/migrations/AddCategoryEntity\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-c\u1eadp-nh\u1eadt-seeds",children:"5. C\u1eadp nh\u1eadt Seeds"}),"\n",(0,r.jsxs)(n.p,{children:["T\u1ea1o file seed m\u1edbi v\xe0 c\u1eadp nh\u1eadt ",(0,r.jsx)(n.code,{children:"runSeeds"})," function \u0111\u1ec3 include entity m\u1edbi."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"L\u01b0u \xfd"}),": \u0110\u1ea3m b\u1ea3o th\u1ee9 t\u1ef1 seeding ph\xf9 h\u1ee3p v\u1edbi dependencies gi\u1eefa c\xe1c entities."]}),"\n",(0,r.jsx)(n.h3,{id:"6-build-v\xe0-test",children:"6. Build v\xe0 Test"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build library\nnpm run build\n\n# Run migration\nnpm run typeorm:run\n\n# Test seeding\nnpm run seed\n\n# Verify build\nnpm run lint\n"})}),"\n",(0,r.jsx)(n.h2,{id:"core_entities",children:"CORE_ENTITIES"}),"\n",(0,r.jsx)(n.p,{children:"Array ch\u1ee9a t\u1ea5t c\u1ea3 core entities \u0111\u1ec3 d\u1ec5 d\xe0ng \u0111\u0103ng k\xfd trong TypeORM modules."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const CORE_ENTITIES: EntityClassOrSchema[] = [User, Product];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"s\u1eed-d\u1ee5ng-trong-typeorm-module",children:"S\u1eed d\u1ee5ng trong TypeORM Module"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { CORE_ENTITIES } from '@ecom-co/orm';\n\n@Module({\n    imports: [\n        TypeOrmModule.forRoot({\n            entities: CORE_ENTITIES, // S\u1eed d\u1ee5ng t\u1ea5t c\u1ea3 core entities\n        }),\n    ],\n})\nexport class AppModule {}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"s\u1eed-d\u1ee5ng-trong-feature-module",children:"S\u1eed d\u1ee5ng trong Feature Module"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { CORE_ENTITIES } from '@ecom-co/orm';\n\n@Module({\n    imports: [\n        TypeOrmModule.forFeature(CORE_ENTITIES), // \u0110\u0103ng k\xfd t\u1ea5t c\u1ea3 core entities\n    ],\n})\nexport class CoreModule {}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"l\xfd-thuy\u1ebft-v\u1ec1-entity",children:"L\xfd thuy\u1ebft v\u1ec1 Entity"}),"\n",(0,r.jsx)(n.h3,{id:"1-c\u1ea5u-tr\xfac-entity",children:"1. C\u1ea5u tr\xfac Entity"}),"\n",(0,r.jsx)(n.p,{children:"Entity trong TypeORM l\xe0 class \u0111\u1ea1i di\u1ec7n cho database table. M\u1ed7i entity c\u1ea7n:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Decorator ",(0,r.jsx)(n.code,{children:"@Entity()"})]}),": \u0110\u1ecbnh ngh\u0129a table name v\xe0 metadata"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Extend ",(0,r.jsx)(n.code,{children:"OrmBaseEntity"})]}),": K\u1ebf th\u1eeba c\xe1c t\xednh n\u0103ng c\u01a1 b\u1ea3n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Decorator ",(0,r.jsx)(n.code,{children:"@Column()"})]}),": \u0110\u1ecbnh ngh\u0129a table columns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Relationships"}),": \u0110\u1ecbnh ngh\u0129a m\u1ed1i quan h\u1ec7 v\u1edbi entities kh\xe1c"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-quy-t\u1eafc-\u0111\u1eb7t-t\xean",children:"2. Quy t\u1eafc \u0111\u1eb7t t\xean"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Entity class"}),": PascalCase (v\xed d\u1ee5: ",(0,r.jsx)(n.code,{children:"UserProfile"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Table name"}),": snake_case (v\xed d\u1ee5: ",(0,r.jsx)(n.code,{children:"user_profiles"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Column names"}),": snake_case (v\xed d\u1ee5: ",(0,r.jsx)(n.code,{children:"created_at"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File names"}),": kebab-case (v\xed d\u1ee5: ",(0,r.jsx)(n.code,{children:"user-profile.entity.ts"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-column-types",children:"3. Column Types"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"String"}),": ",(0,r.jsx)(n.code,{children:"varchar"}),", ",(0,r.jsx)(n.code,{children:"text"}),", ",(0,r.jsx)(n.code,{children:"char"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Numeric"}),": ",(0,r.jsx)(n.code,{children:"int"}),", ",(0,r.jsx)(n.code,{children:"decimal"}),", ",(0,r.jsx)(n.code,{children:"float"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Boolean"}),": ",(0,r.jsx)(n.code,{children:"boolean"})," ho\u1eb7c ",(0,r.jsx)(n.code,{children:"int"})," v\u1edbi transformer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Date"}),": ",(0,r.jsx)(n.code,{children:"timestamp"}),", ",(0,r.jsx)(n.code,{children:"date"}),", ",(0,r.jsx)(n.code,{children:"timestamptz"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"JSON"}),": ",(0,r.jsx)(n.code,{children:"json"}),", ",(0,r.jsx)(n.code,{children:"jsonb"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Extend OrmBaseEntity"}),": Lu\xf4n extend ",(0,r.jsx)(n.code,{children:"OrmBaseEntity"})," \u0111\u1ec3 c\xf3 \u0111\u01b0\u1ee3c audit trail v\xe0 lifecycle management."]})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use meaningful names"}),": \u0110\u1eb7t t\xean entity v\xe0 table r\xf5 r\xe0ng, c\xf3 \xfd ngh\u0129a."]})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Add comments"}),": S\u1eed d\u1ee5ng comment \u0111\u1ec3 m\xf4 t\u1ea3 m\u1ee5c \u0111\xedch c\u1ee7a entity v\xe0 columns."]})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Password security"}),": Lu\xf4n s\u1eed d\u1ee5ng ",(0,r.jsx)(n.code,{children:"select: false"})," cho password fields."]})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Relationships"}),": S\u1eed d\u1ee5ng eager loading cho c\xe1c relationships th\u01b0\u1eddng xuy\xean \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng."]})}),"\n",(0,r.jsx)(n.h2,{id:"t\u1ed5ng-k\u1ebft",children:"T\u1ed5ng k\u1ebft"}),"\n",(0,r.jsx)(n.h3,{id:"workflow-th\xeam-entity-m\u1edbi",children:"Workflow th\xeam Entity m\u1edbi"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"T\u1ea1o Entity Class"})," \u2192 Extend OrmBaseEntity, \u0111\u1ecbnh ngh\u0129a columns v\xe0 relationships"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"C\u1eadp nh\u1eadt CORE_ENTITIES"})," \u2192 Th\xeam entity v\xe0o array \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng \u0111\u0103ng k\xfd"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Export t\u1eeb main index"})," \u2192 \u0110\u1ec3 c\xf3 th\u1ec3 import t\u1eeb b\xean ngo\xe0i"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"T\u1ea1o Migration"})," \u2192 Generate migration t\u1eeb entity changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"C\u1eadp nh\u1eadt Seeds"})," \u2192 Th\xeam logic seeding cho entity m\u1edbi"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build v\xe0 Test"})," \u2192 Build library v\xe0 test migration/seeding"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"l\u1ee3i-\xedch-c\u1ee7a-ormbaseentity",children:"L\u1ee3i \xedch c\u1ee7a OrmBaseEntity"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Audit Trail"}),": T\u1ef1 \u0111\u1ed9ng qu\u1ea3n l\xfd createdAt, updatedAt, deletedAt"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"UUID Primary Keys"}),": S\u1eed d\u1ee5ng UUID thay v\xec auto-increment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Soft Delete"}),": H\u1ed7 tr\u1ee3 x\xf3a m\u1ec1m v\u1edbi deletedAt"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lifecycle Management"}),": C\xe1c utility methods \u0111\u1ec3 qu\u1ea3n l\xfd entity lifecycle"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Safety"}),": Full TypeScript support v\u1edbi type safety"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);