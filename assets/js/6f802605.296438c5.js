"use strict";(self.webpackChunktemplate_docs=self.webpackChunktemplate_docs||[]).push([[1958],{11470:(n,e,i)=>{i.d(e,{A:()=>C});var t=i(96540),r=i(34164),o=i(23104),a=i(56347),s=i(205),l=i(57485),c=i(31682),d=i(70679);function u(n){return t.Children.toArray(n).filter(n=>"\n"!==n).map(n=>{if(!n||(0,t.isValidElement)(n)&&function(n){const{props:e}=n;return!!e&&"object"==typeof e&&"value"in e}(n))return n;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof n.type?n.type:n.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(n){const{values:e,children:i}=n;return(0,t.useMemo)(()=>{const n=e??function(n){return u(n).map(({props:{value:n,label:e,attributes:i,default:t}})=>({value:n,label:e,attributes:i,default:t}))}(i);return function(n){const e=(0,c.XI)(n,(n,e)=>n.value===e.value);if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map(n=>n.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(n),n},[e,i])}function h({value:n,tabValues:e}){return e.some(e=>e.value===n)}function g({queryString:n=!1,groupId:e}){const i=(0,a.W6)(),r=function({queryString:n=!1,groupId:e}){if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!e)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return e??null}({queryString:n,groupId:e});return[(0,l.aZ)(r),(0,t.useCallback)(n=>{if(!r)return;const e=new URLSearchParams(i.location.search);e.set(r,n),i.replace({...i.location,search:e.toString()})},[r,i])]}function x(n){const{defaultValue:e,queryString:i=!1,groupId:r}=n,o=p(n),[a,l]=(0,t.useState)(()=>function({defaultValue:n,tabValues:e}){if(0===e.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:e}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${e.map(n=>n.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=e.find(n=>n.default)??e[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:e,tabValues:o})),[c,u]=g({queryString:i,groupId:r}),[x,m]=function({groupId:n}){const e=function(n){return n?`docusaurus.tab.${n}`:null}(n),[i,r]=(0,d.Dv)(e);return[i,(0,t.useCallback)(n=>{e&&r.set(n)},[e,r])]}({groupId:r}),f=(()=>{const n=c??x;return h({value:n,tabValues:o})?n:null})();(0,s.A)(()=>{f&&l(f)},[f]);return{selectedValue:a,selectValue:(0,t.useCallback)(n=>{if(!h({value:n,tabValues:o}))throw new Error(`Can't select invalid tab value=${n}`);l(n),u(n),m(n)},[u,m,o]),tabValues:o}}var m=i(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=i(74848);function j({className:n,block:e,selectedValue:i,selectValue:t,tabValues:a}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=n=>{const e=n.currentTarget,r=s.indexOf(e),o=a[r].value;o!==i&&(l(e),t(o))},d=n=>{let e=null;switch(n.key){case"Enter":c(n);break;case"ArrowRight":{const i=s.indexOf(n.currentTarget)+1;e=s[i]??s[0];break}case"ArrowLeft":{const i=s.indexOf(n.currentTarget)-1;e=s[i]??s[s.length-1];break}}e?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":e},n),children:a.map(({value:n,label:e,attributes:t})=>(0,v.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:n=>{s.push(n)},onKeyDown:d,onClick:c,...t,className:(0,r.A)("tabs__item",f.tabItem,t?.className,{"tabs__item--active":i===n}),children:e??n},n))})}function b({lazy:n,children:e,selectedValue:i}){const o=(Array.isArray(e)?e:[e]).filter(Boolean);if(n){const n=o.find(n=>n.props.value===i);return n?(0,t.cloneElement)(n,{className:(0,r.A)("margin-top--md",n.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:o.map((n,e)=>(0,t.cloneElement)(n,{key:e,hidden:n.props.value!==i}))})}function y(n){const e=x(n);return(0,v.jsxs)("div",{className:(0,r.A)("tabs-container",f.tabList),children:[(0,v.jsx)(j,{...e,...n}),(0,v.jsx)(b,{...e,...n})]})}function C(n){const e=(0,m.A)();return(0,v.jsx)(y,{...n,children:u(n.children)},String(e))}},19365:(n,e,i)=>{i.d(e,{A:()=>a});i(96540);var t=i(34164);const r={tabItem:"tabItem_Ymn6"};var o=i(74848);function a({children:n,hidden:e,className:i}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,i),hidden:e,children:n})}},28453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>s});var t=i(96540);const r={},o=t.createContext(r);function a(n){const e=t.useContext(o);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),t.createElement(o.Provider,{value:e},n.children)}},97984:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"ecom-co/libs/utils/docs/validation-config","title":"Validation Config \u2014 Validation Pipe Configuration","description":"Configuration module cho ValidationPipe trong NestJS applications, cung c\u1ea5p custom exception factory, environment-specific configurations, v\xe0 flexible validation options v\u1edbi class-validator integration.","source":"@site/docs/ecom-co/libs/utils/docs/validation-config.md","sourceDirName":"ecom-co/libs/utils/docs","slug":"/validation-config","permalink":"/document/docs/validation-config","draft":false,"unlisted":false,"editUrl":"https://github.com/ecom-co/document/tree/main/docs/ecom-co/libs/utils/docs/validation-config.md","tags":[{"inline":true,"label":"validation","permalink":"/document/docs/tags/validation"},{"inline":true,"label":"validation-pipe","permalink":"/document/docs/tags/validation-pipe"},{"inline":true,"label":"class-validator","permalink":"/document/docs/tags/class-validator"},{"inline":true,"label":"configuration","permalink":"/document/docs/tags/configuration"},{"inline":true,"label":"nestjs","permalink":"/document/docs/tags/nestjs"},{"inline":true,"label":"typescript","permalink":"/document/docs/tags/typescript"},{"inline":true,"label":"error-handling","permalink":"/document/docs/tags/error-handling"}],"version":"current","frontMatter":{"id":"validation-config","title":"Validation Config \u2014 Validation Pipe Configuration","sidebar_label":"Validation Config","slug":"/validation-config","description":"Configuration module cho ValidationPipe trong NestJS applications, cung c\u1ea5p custom exception factory, environment-specific configurations, v\xe0 flexible validation options v\u1edbi class-validator integration.","tags":["validation","validation-pipe","class-validator","configuration","nestjs","typescript","error-handling"]},"sidebar":"tutorialSidebar","previous":{"title":"Utils Library","permalink":"/document/docs/ecom-co/libs/utils/utils-library"},"next":{"title":"Swagger Config","permalink":"/document/docs/swagger-config"}}');var r=i(74848),o=i(28453),a=i(11470),s=i(19365);const l={id:"validation-config",title:"Validation Config \u2014 Validation Pipe Configuration",sidebar_label:"Validation Config",slug:"/validation-config",description:"Configuration module cho ValidationPipe trong NestJS applications, cung c\u1ea5p custom exception factory, environment-specific configurations, v\xe0 flexible validation options v\u1edbi class-validator integration.",tags:["validation","validation-pipe","class-validator","configuration","nestjs","typescript","error-handling"]},c=void 0,d={},u=[{value:"T\u1ed5ng quan",id:"t\u1ed5ng-quan",level:3},{value:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng",id:"c\xe1ch-ho\u1ea1t-\u0111\u1ed9ng",level:3},{value:"Ki\u1ebfn tr\xfac Module",id:"ki\u1ebfn-tr\xfac-module",level:3},{value:"1. Core Configuration",id:"1-core-configuration",level:2},{value:"1.1 validationExceptionFactory",id:"11-validationexceptionfactory",level:3},{value:"Function Signature",id:"function-signature",level:4},{value:"Parameters",id:"parameters",level:4},{value:"Return Value",id:"return-value",level:4},{value:"Error Transformation",id:"error-transformation",level:4},{value:"Usage Examples",id:"usage-examples",level:4},{value:"1.2 ValidationPipeOptions Interface",id:"12-validationpipeoptions-interface",level:3},{value:"Interface Definition",id:"interface-definition",level:4},{value:"Property Details",id:"property-details",level:4},{value:"2. Pre-configured Validation Pipes",id:"2-pre-configured-validation-pipes",level:2},{value:"2.1 validationPipeConfig (Development)",id:"21-validationpipeconfig-development",level:3},{value:"Configuration Details",id:"configuration-details",level:4},{value:"Use Cases",id:"use-cases",level:4},{value:"Security Features",id:"security-features",level:4},{value:"2.2 productionValidationPipeConfig (Production)",id:"22-productionvalidationpipeconfig-production",level:3},{value:"Configuration Details",id:"configuration-details-1",level:4},{value:"Production Optimizations",id:"production-optimizations",level:4},{value:"3. Dynamic Configuration",id:"3-dynamic-configuration",level:2},{value:"3.1 getValidationPipeConfig Function",id:"31-getvalidationpipeconfig-function",level:3},{value:"Function Signature",id:"function-signature-1",level:4},{value:"Parameters",id:"parameters-1",level:4},{value:"Return Value",id:"return-value-1",level:4},{value:"Default Values",id:"default-values",level:4},{value:"Usage Examples",id:"usage-examples-1",level:4},{value:"4. Integration Examples",id:"4-integration-examples",level:2},{value:"4.1 Main Application Setup",id:"41-main-application-setup",level:3},{value:"4.2 Module-Level Configuration",id:"42-module-level-configuration",level:3},{value:"4.3 Controller-Level Configuration",id:"43-controller-level-configuration",level:3},{value:"4.4 Method-Level Configuration",id:"44-method-level-configuration",level:3},{value:"5. Error Handling",id:"5-error-handling",level:2},{value:"5.1 ValidationException Structure",id:"51-validationexception-structure",level:3},{value:"5.2 Custom Error Handling",id:"52-custom-error-handling",level:3},{value:"5.3 Error Response Customization",id:"53-error-response-customization",level:3},{value:"6. Best Practices",id:"6-best-practices",level:2},{value:"6.1 Security Configuration",id:"61-security-configuration",level:3},{value:"6.2 Performance Optimization",id:"62-performance-optimization",level:3},{value:"6.3 Error Handling",id:"63-error-handling",level:3},{value:"6.4 Configuration Management",id:"64-configuration-management",level:3},{value:"7. Troubleshooting",id:"7-troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"8. Advanced Configuration",id:"8-advanced-configuration",level:2},{value:"8.1 Conditional Validation",id:"81-conditional-validation",level:3},{value:"8.2 Multi-tenant Validation",id:"82-multi-tenant-validation",level:3},{value:"8.3 Dynamic Validation Rules",id:"83-dynamic-validation-rules",level:3},{value:"9. Testing",id:"9-testing",level:2},{value:"9.1 Unit Testing",id:"91-unit-testing",level:3},{value:"9.2 Integration Testing",id:"92-integration-testing",level:3}];function p(n){const e={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsx)(e.p,{children:"Validation Config module cung c\u1ea5p h\u1ec7 th\u1ed1ng configuration ho\xe0n ch\u1ec9nh \u0111\u1ec3 setup ValidationPipe trong NestJS applications, bao g\u1ed3m custom exception factory, environment-specific configurations, v\xe0 flexible validation options."})}),"\n",(0,r.jsx)(e.h3,{id:"t\u1ed5ng-quan",children:"T\u1ed5ng quan"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"M\u1ee5c ti\xeau"}),": Cung c\u1ea5p centralized validation configuration v\u1edbi custom exception handling v\xe0 environment-specific settings"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u0110i\u1ec3m n\u1ed5i b\u1eadt"}),":","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Custom Exception Factory"}),": Transform validation errors th\xe0nh custom ValidationException"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Environment-Specific Configs"}),": Development v\xe0 production configurations"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Flexible Options"}),": Customizable validation pipe options"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Security Features"}),": Whitelist validation v\xe0 unknown value prevention"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Sanitization"}),": Sanitized error messages cho production"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Integration Ready"}),": T\xedch h\u1ee3p ho\xe0n h\u1ea3o v\u1edbi class-validator v\xe0 NestJS"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"c\xe1ch-ho\u1ea1t-\u0111\u1ed9ng",children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng"}),"\n",(0,r.jsx)(e.mermaid,{value:'graph TD\n    A[ValidationPipe] --\x3e B[Input Validation]\n    B --\x3e C[Validation Errors]\n    C --\x3e D[Exception Factory]\n    D --\x3e E[Custom ValidationException]\n    E --\x3e F[Error Response]\n\n    subgraph "Validation Flow"\n        G[Request Data] --\x3e H[Class Validator]\n        H --\x3e I[Validation Rules]\n        I --\x3e J[Validation Result]\n    end\n\n    subgraph "Exception Handling"\n        K[Raw ValidationError] --\x3e L[Error Mapping]\n        L --\x3e M[Custom Error Format]\n        M --\x3e N[ValidationException]\n    end\n\n    subgraph "Configuration Options"\n        O[Whitelist]\n        P[Forbid Unknown]\n        Q[Transform]\n        R[Error Messages]\n    end\n\n    A --\x3e O\n    A --\x3e P\n    A --\x3e Q\n    A --\x3e R\n\n    G --\x3e A\n    J --\x3e C\n    K --\x3e D\n    N --\x3e F'}),"\n",(0,r.jsx)(e.h3,{id:"ki\u1ebfn-tr\xfac-module",children:"Ki\u1ebfn tr\xfac Module"}),"\n",(0,r.jsx)(e.mermaid,{value:'graph LR\n    subgraph "Core Functions"\n        A[validationExceptionFactory]\n        B[getValidationPipeConfig]\n    end\n\n    subgraph "Pre-configured Pipes"\n        C[validationPipeConfig]\n        D[productionValidationPipeConfig]\n    end\n\n    subgraph "Configuration Interface"\n        E[ValidationPipeOptions]\n    end\n\n    subgraph "Error Handling"\n        F[ValidationException]\n        G[Error Mapping]\n    end\n\n    A --\x3e F\n    A --\x3e G\n\n    B --\x3e E\n    B --\x3e A\n\n    C --\x3e A\n    D --\x3e A\n\n    E --\x3e B'}),"\n",(0,r.jsx)(e.h2,{id:"1-core-configuration",children:"1. Core Configuration"}),"\n",(0,r.jsx)(e.h3,{id:"11-validationexceptionfactory",children:"1.1 validationExceptionFactory"}),"\n",(0,r.jsx)(e.h4,{id:"function-signature",children:"Function Signature"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"export const validationExceptionFactory = (errors: ValidationError[]) => ValidationException;\n"})}),"\n",(0,r.jsx)(e.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Parameter"}),(0,r.jsx)(e.th,{children:"Type"}),(0,r.jsx)(e.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"errors"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"ValidationError[]"})}),(0,r.jsx)(e.td,{children:"Array c\xe1c validation errors t\u1eeb class-validator"})]})})]}),"\n",(0,r.jsx)(e.h4,{id:"return-value",children:"Return Value"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Return Type"}),(0,r.jsx)(e.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"ValidationException"})}),(0,r.jsx)(e.td,{children:"Custom validation exception v\u1edbi formatted errors"})]})})]}),"\n",(0,r.jsx)(e.h4,{id:"error-transformation",children:"Error Transformation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const customErrors = map(errors, (error) => ({\n    constraints: error.constraints ? { ...error.constraints } : {},\n    property: String(error.property),\n    value: error.value as unknown,\n}));\n"})}),"\n",(0,r.jsx)(e.h4,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(s.A,{value:"basic",label:"Basic Usage",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// S\u1eed d\u1ee5ng tr\u1ef1c ti\u1ebfp\nconst errors = [\n    {\n        property: 'email',\n        constraints: { isEmail: 'Email kh\xf4ng h\u1ee3p l\u1ec7' },\n        value: 'invalid-email',\n    },\n];\n\nconst exception = validationExceptionFactory(errors);\nthrow exception;\n"})})}),(0,r.jsx)(s.A,{value:"custom",label:"Custom Implementation",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// T\u1ea1o custom exception factory\nconst customExceptionFactory = (errors: ValidationError[]) => {\n    const formattedErrors = errors.map((error) => ({\n        field: error.property,\n        message: Object.values(error.constraints || {})[0],\n        value: error.value,\n    }));\n\n    return new ValidationException(formattedErrors);\n};\n\n// S\u1eed d\u1ee5ng trong validation pipe\nconst customPipe = new ValidationPipe({\n    exceptionFactory: customExceptionFactory,\n});\n"})})})]}),"\n",(0,r.jsx)(e.h3,{id:"12-validationpipeoptions-interface",children:"1.2 ValidationPipeOptions Interface"}),"\n",(0,r.jsx)(e.h4,{id:"interface-definition",children:"Interface Definition"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"export interface ValidationPipeOptions {\n    /** Custom exception factory function */\n    customExceptionFactory?: (errors: ValidationError[]) => unknown;\n    /** Whether to disable error messages */\n    disableErrorMessages?: boolean;\n    /** Whether to forbid non-whitelisted properties */\n    forbidNonWhitelisted?: boolean;\n    /** Whether to forbid unknown values */\n    forbidUnknownValues?: boolean;\n    /** Whether to enable automatic transformation */\n    transform?: boolean;\n    /** Whether to enable property whitelisting */\n    whitelist?: boolean;\n}\n"})}),"\n",(0,r.jsx)(e.h4,{id:"property-details",children:"Property Details"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Property"}),(0,r.jsx)(e.th,{children:"Type"}),(0,r.jsx)(e.th,{children:"Default"}),(0,r.jsx)(e.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"customExceptionFactory"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"(errors: ValidationError[]) => unknown"})}),(0,r.jsx)(e.td,{children:"-"}),(0,r.jsx)(e.td,{children:"Custom exception factory function"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"disableErrorMessages"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"boolean"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"false"})}),(0,r.jsx)(e.td,{children:"T\u1eaft error messages"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"forbidNonWhitelisted"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"boolean"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"true"})}),(0,r.jsx)(e.td,{children:"C\u1ea5m properties kh\xf4ng c\xf3 trong whitelist"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"forbidUnknownValues"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"boolean"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"true"})}),(0,r.jsx)(e.td,{children:"C\u1ea5m unknown values"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"transform"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"boolean"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"true"})}),(0,r.jsx)(e.td,{children:"B\u1eadt automatic transformation"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"whitelist"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"boolean"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"true"})}),(0,r.jsx)(e.td,{children:"B\u1eadt property whitelisting"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"2-pre-configured-validation-pipes",children:"2. Pre-configured Validation Pipes"}),"\n",(0,r.jsx)(e.h3,{id:"21-validationpipeconfig-development",children:"2.1 validationPipeConfig (Development)"}),"\n",(0,r.jsx)(e.h4,{id:"configuration-details",children:"Configuration Details"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"export const validationPipeConfig = new ValidationPipe({\n    disableErrorMessages: false, // Hi\u1ec3n th\u1ecb error messages\n    exceptionFactory: validationExceptionFactory, // Custom exception factory\n    forbidNonWhitelisted: true, // C\u1ea5m non-whitelisted properties\n    forbidUnknownValues: true, // C\u1ea5m unknown values\n    transform: true, // B\u1eadt transformation\n    validationError: {\n        target: false, // Kh\xf4ng hi\u1ec3n th\u1ecb target object\n        value: false, // Kh\xf4ng hi\u1ec3n th\u1ecb invalid values\n    },\n    whitelist: true, // B\u1eadt whitelist validation\n});\n"})}),"\n",(0,r.jsx)(e.h4,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Development Environment"}),": \u0110\u1ea7y \u0111\u1ee7 error messages v\xe0 validation"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Testing"}),": Comprehensive validation cho unit tests"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Debugging"}),": Detailed error information"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"security-features",children:"Security Features"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Whitelist Validation"}),": Ch\u1ec9 cho ph\xe9p properties \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a trong DTO"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Unknown Value Prevention"}),": Ng\u0103n ch\u1eb7n injection attacks"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Property Sanitization"}),": Lo\u1ea1i b\u1ecf unexpected properties"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"22-productionvalidationpipeconfig-production",children:"2.2 productionValidationPipeConfig (Production)"}),"\n",(0,r.jsx)(e.h4,{id:"configuration-details-1",children:"Configuration Details"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"export const productionValidationPipeConfig = new ValidationPipe({\n    disableErrorMessages: false, // V\u1eabn hi\u1ec3n th\u1ecb error messages\n    exceptionFactory: validationExceptionFactory, // Custom exception factory\n    forbidNonWhitelisted: true, // C\u1ea5m non-whitelisted properties\n    forbidUnknownValues: true, // C\u1ea5m unknown values\n    transform: true, // B\u1eadt transformation\n    validationError: {\n        target: false, // Kh\xf4ng hi\u1ec3n th\u1ecb target object\n        value: false, // Kh\xf4ng hi\u1ec3n th\u1ecb invalid values\n    },\n    whitelist: true, // B\u1eadt whitelist validation\n});\n"})}),"\n",(0,r.jsx)(e.h4,{id:"production-optimizations",children:"Production Optimizations"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Sanitization"}),": Lo\u1ea1i b\u1ecf sensitive information"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Performance"}),": Optimized validation rules"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Security"}),": Strict validation policies"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"3-dynamic-configuration",children:"3. Dynamic Configuration"}),"\n",(0,r.jsx)(e.h3,{id:"31-getvalidationpipeconfig-function",children:"3.1 getValidationPipeConfig Function"}),"\n",(0,r.jsx)(e.h4,{id:"function-signature-1",children:"Function Signature"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"export const getValidationPipeConfig = (options: ValidationPipeOptions = {}): ValidationPipe\n"})}),"\n",(0,r.jsx)(e.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Parameter"}),(0,r.jsx)(e.th,{children:"Type"}),(0,r.jsx)(e.th,{children:"Default"}),(0,r.jsx)(e.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"options"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"ValidationPipeOptions"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"{}"})}),(0,r.jsx)(e.td,{children:"Custom validation pipe configuration"})]})})]}),"\n",(0,r.jsx)(e.h4,{id:"return-value-1",children:"Return Value"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Return Type"}),(0,r.jsx)(e.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"ValidationPipe"})}),(0,r.jsx)(e.td,{children:"Configured validation pipe instance"})]})})]}),"\n",(0,r.jsx)(e.h4,{id:"default-values",children:"Default Values"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const {\n    customExceptionFactory,\n    disableErrorMessages = false,\n    forbidNonWhitelisted = true,\n    forbidUnknownValues = true,\n    transform = true,\n    whitelist = true,\n} = options;\n"})}),"\n",(0,r.jsx)(e.h4,{id:"usage-examples-1",children:"Usage Examples"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(s.A,{value:"basic",label:"Basic Usage",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// S\u1eed d\u1ee5ng v\u1edbi default options\nconst validationPipe = getValidationPipeConfig();\n\n// S\u1eed d\u1ee5ng trong main.ts\napp.useGlobalPipes(validationPipe);\n"})})}),(0,r.jsx)(s.A,{value:"custom",label:"Custom Options",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Custom configuration\nconst customValidationPipe = getValidationPipeConfig({\n    disableErrorMessages: true, // T\u1eaft error messages\n    transform: false, // T\u1eaft transformation\n    whitelist: false, // T\u1eaft whitelist validation\n    customExceptionFactory: (errors) => {\n        // Custom error handling logic\n        return new CustomValidationException(errors);\n    },\n});\n\napp.useGlobalPipes(customValidationPipe);\n"})})}),(0,r.jsx)(s.A,{value:"environment",label:"Environment-Specific",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Environment-based configuration\nconst getEnvironmentValidationPipe = () => {\n    if (process.env.NODE_ENV === 'production') {\n        return getValidationPipeConfig({\n            disableErrorMessages: true, // T\u1eaft error messages trong production\n            forbidNonWhitelisted: true, // Strict validation\n            forbidUnknownValues: true, // C\u1ea5m unknown values\n        });\n    }\n\n    // Development configuration\n    return getValidationPipeConfig({\n        disableErrorMessages: false, // Hi\u1ec3n th\u1ecb error messages\n        transform: true, // B\u1eadt transformation\n        whitelist: true, // B\u1eadt whitelist validation\n    });\n};\n\nconst validationPipe = getEnvironmentValidationPipe();\napp.useGlobalPipes(validationPipe);\n"})})})]}),"\n",(0,r.jsx)(e.h2,{id:"4-integration-examples",children:"4. Integration Examples"}),"\n",(0,r.jsx)(e.h3,{id:"41-main-application-setup",children:"4.1 Main Application Setup"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// main.ts\nimport { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\nimport { getValidationPipeConfig } from '@ecom-co/utils';\n\nasync function bootstrap() {\n    const app = await NestFactory.create(AppModule);\n\n    // Setup validation pipe\n    const validationPipe = getValidationPipeConfig({\n        disableErrorMessages: process.env.NODE_ENV === 'production',\n        transform: true,\n        whitelist: true,\n        forbidNonWhitelisted: true,\n        forbidUnknownValues: true,\n    });\n\n    app.useGlobalPipes(validationPipe);\n\n    await app.listen(3000);\n}\n\nbootstrap();\n"})}),"\n",(0,r.jsx)(e.h3,{id:"42-module-level-configuration",children:"4.2 Module-Level Configuration"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// app.module.ts\nimport { Module } from '@nestjs/common';\nimport { APP_PIPE } from '@nestjs/core';\nimport { getValidationPipeConfig } from '@ecom-co/utils';\n\n@Module({\n    providers: [\n        {\n            provide: APP_PIPE,\n            useFactory: () =>\n                getValidationPipeConfig({\n                    transform: true,\n                    whitelist: true,\n                }),\n        },\n    ],\n})\nexport class AppModule {}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"43-controller-level-configuration",children:"4.3 Controller-Level Configuration"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// user.controller.ts\nimport { Controller, Post, Body, UsePipes } from '@nestjs/common';\nimport { ValidationPipe } from '@nestjs/common';\nimport { getValidationPipeConfig } from '@ecom-co/utils';\nimport { CreateUserDto } from './dto/create-user.dto';\n\n@Controller('users')\nexport class UserController {\n    @Post()\n    @UsePipes(\n        getValidationPipeConfig({\n            transform: true,\n            whitelist: true,\n            forbidNonWhitelisted: true,\n        }),\n    )\n    async createUser(@Body() createUserDto: CreateUserDto) {\n        // Validation pipe s\u1ebd validate v\xe0 transform data\n        return this.userService.create(createUserDto);\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"44-method-level-configuration",children:"4.4 Method-Level Configuration"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// product.controller.ts\nimport { Controller, Post, Body, UsePipes } from '@nestjs/common';\nimport { getValidationPipeConfig } from '@ecom-co/utils';\nimport { CreateProductDto } from './dto/create-product.dto';\n\n@Controller('products')\nexport class ProductController {\n    @Post()\n    @UsePipes(\n        getValidationPipeConfig({\n            transform: true,\n            whitelist: true,\n            forbidNonWhitelisted: true,\n            customExceptionFactory: (errors) => {\n                // Custom error handling cho product creation\n                return new ProductValidationException(errors);\n            },\n        }),\n    )\n    async createProduct(@Body() createProductDto: CreateProductDto) {\n        return this.productService.create(createProductDto);\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"5-error-handling",children:"5. Error Handling"}),"\n",(0,r.jsx)(e.h3,{id:"51-validationexception-structure",children:"5.1 ValidationException Structure"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'// Error response structure\n{\n    "statusCode": 400,\n    "message": "Validation failed",\n    "errors": [\n        {\n            "constraints": {\n                "isEmail": "Email kh\xf4ng h\u1ee3p l\u1ec7"\n            },\n            "property": "email",\n            "value": "invalid-email"\n        },\n        {\n            "constraints": {\n                "minLength": "T\xean ph\u1ea3i c\xf3 \xedt nh\u1ea5t 2 k\xfd t\u1ef1"\n            },\n            "property": "name",\n            "value": "a"\n        }\n    ]\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"52-custom-error-handling",children:"5.2 Custom Error Handling"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Custom exception factory v\u1edbi detailed logging\nconst detailedExceptionFactory = (errors: ValidationError[]) => {\n    // Log validation errors cho debugging\n    console.log('Validation Errors:', JSON.stringify(errors, null, 2));\n\n    // Transform errors th\xe0nh user-friendly format\n    const userErrors = errors.map((error) => ({\n        field: error.property,\n        message: Object.values(error.constraints || {})[0],\n        code: `VALIDATION_${error.property.toUpperCase()}_FAILED`,\n    }));\n\n    return new ValidationException(userErrors);\n};\n\n// S\u1eed d\u1ee5ng trong validation pipe\nconst detailedValidationPipe = getValidationPipeConfig({\n    customExceptionFactory: detailedExceptionFactory,\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"53-error-response-customization",children:"5.3 Error Response Customization"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Custom error response format\nconst customExceptionFactory = (errors: ValidationError[]) => {\n    const formattedErrors = errors.map((error) => ({\n        field: error.property,\n        message: Object.values(error.constraints || {})[0],\n        suggestion: getFieldSuggestion(error.property), // Custom suggestion logic\n        timestamp: new Date().toISOString(),\n    }));\n\n    const exception = new ValidationException(formattedErrors);\n\n    // Add custom metadata\n    exception.setErrorCode('VALIDATION_FAILED');\n    exception.setRequestId(generateRequestId());\n\n    return exception;\n};\n"})}),"\n",(0,r.jsx)(e.h2,{id:"6-best-practices",children:"6. Best Practices"}),"\n",(0,r.jsx)(e.h3,{id:"61-security-configuration",children:"6.1 Security Configuration"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["Lu\xf4n b\u1eadt ",(0,r.jsx)(e.code,{children:"whitelist: true"})]})," \u0111\u1ec3 ng\u0103n ch\u1eb7n unexpected properties"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["S\u1eed d\u1ee5ng ",(0,r.jsx)(e.code,{children:"forbidNonWhitelisted: true"})]})," \u0111\u1ec3 reject requests v\u1edbi unknown properties"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["B\u1eadt ",(0,r.jsx)(e.code,{children:"forbidUnknownValues: true"})]})," \u0111\u1ec3 ng\u0103n ch\u1eb7n injection attacks"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["T\u1eaft ",(0,r.jsx)(e.code,{children:"disableErrorMessages: true"})]})," trong production \u0111\u1ec3 \u1ea9n sensitive information"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"62-performance-optimization",children:"6.2 Performance Optimization"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["S\u1eed d\u1ee5ng ",(0,r.jsx)(e.code,{children:"transform: true"})]})," \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng transform data types"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cache validation pipe instances"})," \u0111\u1ec3 tr\xe1nh t\u1ea1o l\u1ea1i"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"S\u1eed d\u1ee5ng environment-specific configurations"})," \u0111\u1ec3 optimize cho t\u1eebng m\xf4i tr\u01b0\u1eddng"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"63-error-handling",children:"6.3 Error Handling"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Custom exception factory"})," \u0111\u1ec3 format errors theo business requirements"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Consistent error response format"})," across all endpoints"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Proper error logging"})," cho debugging v\xe0 monitoring"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User-friendly error messages"})," cho end users"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"64-configuration-management",children:"6.4 Configuration Management"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Environment-based configuration"})," \u0111\u1ec3 optimize cho t\u1eebng m\xf4i tr\u01b0\u1eddng"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Centralized validation configuration"})," \u0111\u1ec3 maintain consistency"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Flexible options"})," \u0111\u1ec3 customize theo t\u1eebng use case"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Documentation"})," cho t\u1ea5t c\u1ea3 configuration options"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"7-troubleshooting",children:"7. Troubleshooting"}),"\n",(0,r.jsx)(e.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Issue 1: Validation pipe kh\xf4ng ho\u1ea1t \u0111\u1ed9ng"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Error: Validation kh\xf4ng \u0111\u01b0\u1ee3c apply\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solution"}),": \u0110\u1ea3m b\u1ea3o validation pipe \u0111\u01b0\u1ee3c register \u0111\xfang c\xe1ch:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Trong main.ts\napp.useGlobalPipes(getValidationPipeConfig());\n\n// Ho\u1eb7c trong module\n{\n    provide: APP_PIPE,\n    useFactory: () => getValidationPipeConfig()\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Issue 2: Custom exception factory kh\xf4ng \u0111\u01b0\u1ee3c g\u1ecdi"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Error: Exception factory kh\xf4ng ho\u1ea1t \u0111\u1ed9ng\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solution"}),": Ki\u1ec3m tra exception factory configuration:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const validationPipe = getValidationPipeConfig({\n    customExceptionFactory: (errors) => {\n        console.log('Custom factory called with:', errors);\n        return new ValidationException(errors);\n    },\n});\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Issue 3: Whitelist validation kh\xf4ng ho\u1ea1t \u0111\u1ed9ng"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Error: Unknown properties v\u1eabn \u0111\u01b0\u1ee3c accept\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solution"}),": \u0110\u1ea3m b\u1ea3o whitelist options \u0111\u01b0\u1ee3c set \u0111\xfang:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const validationPipe = getValidationPipeConfig({\n    whitelist: true, // B\u1eadt whitelist\n    forbidNonWhitelisted: true, // C\u1ea5m non-whitelisted\n    forbidUnknownValues: true, // C\u1ea5m unknown values\n});\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Issue 4: Transformation kh\xf4ng ho\u1ea1t \u0111\u1ed9ng"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Error: Data types kh\xf4ng \u0111\u01b0\u1ee3c transform\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solution"}),": Ki\u1ec3m tra transform option:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const validationPipe = getValidationPipeConfig({\n    transform: true, // B\u1eadt transformation\n    whitelist: true, // B\u1eadt whitelist (required for transform)\n});\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["Lu\xf4n s\u1eed d\u1ee5ng ",(0,r.jsx)(e.code,{children:"whitelist: true"})," v\xe0 ",(0,r.jsx)(e.code,{children:"forbidNonWhitelisted: true"})," \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o security v\xe0 data integrity."]})}),"\n",(0,r.jsx)(e.admonition,{type:"warning",children:(0,r.jsxs)(e.p,{children:["Trong production environment, h\xe3y c\xe2n nh\u1eafc t\u1eaft ",(0,r.jsx)(e.code,{children:"disableErrorMessages: true"})," \u0111\u1ec3 \u1ea9n sensitive information kh\u1ecfi error responses."]})}),"\n",(0,r.jsx)(e.admonition,{type:"danger",children:(0,r.jsxs)(e.p,{children:["Kh\xf4ng bao gi\u1edd set ",(0,r.jsx)(e.code,{children:"whitelist: false"})," trong production environment v\xec \u0111i\u1ec1u n\xe0y c\xf3 th\u1ec3 d\u1eabn \u0111\u1ebfn security vulnerabilities."]})}),"\n",(0,r.jsx)(e.h2,{id:"8-advanced-configuration",children:"8. Advanced Configuration"}),"\n",(0,r.jsx)(e.h3,{id:"81-conditional-validation",children:"8.1 Conditional Validation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Conditional validation pipe configuration\nconst getConditionalValidationPipe = (userRole: string) => {\n    const baseConfig = {\n        transform: true,\n        whitelist: true,\n    };\n\n    if (userRole === 'admin') {\n        return getValidationPipeConfig({\n            ...baseConfig,\n            forbidNonWhitelisted: false, // Admin c\xf3 th\u1ec3 c\xf3 flexible validation\n            customExceptionFactory: (errors) => {\n                // Admin-specific error handling\n                return new AdminValidationException(errors);\n            },\n        });\n    }\n\n    // Regular user validation\n    return getValidationPipeConfig({\n        ...baseConfig,\n        forbidNonWhitelisted: true, // Strict validation cho regular users\n        customExceptionFactory: (errors) => {\n            // User-specific error handling\n            return new UserValidationException(errors);\n        },\n    });\n};\n"})}),"\n",(0,r.jsx)(e.h3,{id:"82-multi-tenant-validation",children:"8.2 Multi-tenant Validation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Multi-tenant validation configuration\nconst getTenantValidationPipe = (tenantId: string) => {\n    const tenantConfigs = {\n        'tenant-a': {\n            disableErrorMessages: false,\n            transform: true,\n            whitelist: true,\n        },\n        'tenant-b': {\n            disableErrorMessages: true, // Strict error handling\n            transform: false, // No transformation\n            whitelist: true,\n        },\n    };\n\n    const config = tenantConfigs[tenantId] || tenantConfigs['tenant-a'];\n\n    return getValidationPipeConfig({\n        ...config,\n        customExceptionFactory: (errors) => {\n            return new TenantValidationException(errors, tenantId);\n        },\n    });\n};\n"})}),"\n",(0,r.jsx)(e.h3,{id:"83-dynamic-validation-rules",children:"8.3 Dynamic Validation Rules"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Dynamic validation pipe v\u1edbi runtime configuration\nconst createDynamicValidationPipe = (rules: ValidationRules) => {\n    const config: ValidationPipeOptions = {\n        transform: rules.allowTransformation,\n        whitelist: rules.strictMode,\n        forbidNonWhitelisted: rules.strictMode,\n        forbidUnknownValues: rules.strictMode,\n    };\n\n    if (rules.customErrorHandling) {\n        config.customExceptionFactory = (errors) => {\n            return new DynamicValidationException(errors, rules);\n        };\n    }\n\n    return getValidationPipeConfig(config);\n};\n\n// S\u1eed d\u1ee5ng\nconst validationPipe = createDynamicValidationPipe({\n    allowTransformation: true,\n    strictMode: true,\n    customErrorHandling: true,\n});\n"})}),"\n",(0,r.jsx)(e.h2,{id:"9-testing",children:"9. Testing"}),"\n",(0,r.jsx)(e.h3,{id:"91-unit-testing",children:"9.1 Unit Testing"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"describe('Validation Config', () => {\n    it('should create validation pipe with default options', () => {\n        const pipe = getValidationPipeConfig();\n\n        expect(pipe).toBeInstanceOf(ValidationPipe);\n        expect(pipe.options.whitelist).toBe(true);\n        expect(pipe.options.forbidNonWhitelisted).toBe(true);\n    });\n\n    it('should create validation pipe with custom options', () => {\n        const pipe = getValidationPipeConfig({\n            disableErrorMessages: true,\n            transform: false,\n        });\n\n        expect(pipe.options.disableErrorMessages).toBe(true);\n        expect(pipe.options.transform).toBe(false);\n    });\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"92-integration-testing",children:"9.2 Integration Testing"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"describe('Validation Pipe Integration', () => {\n    it('should validate DTO correctly', async () => {\n        const app = await NestFactory.create(AppModule);\n        const validationPipe = getValidationPipeConfig();\n        app.useGlobalPipes(validationPipe);\n\n        const response = await request(app.getHttpServer()).post('/users').send({ invalidField: 'value' }).expect(400);\n\n        expect(response.body.errors).toBeDefined();\n        expect(response.body.errors[0].property).toBe('invalidField');\n    });\n});\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Validation Config module"})," cung c\u1ea5p m\u1ed9t h\u1ec7 th\u1ed1ng configuration m\u1ea1nh m\u1ebd v\xe0 linh ho\u1ea1t cho ValidationPipe trong NestJS applications. V\u1edbi custom exception factory, environment-specific configurations, v\xe0 flexible options, \u0111\xe2y l\xe0 tool kh\xf4ng th\u1ec3 thi\u1ebfu \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o data validation, security, v\xe0 error handling consistency! \ud83d\ude80"]}),"\n",(0,r.jsx)(e.p,{children:"Documentation n\xe0y s\u1ebd gi\xfap developers hi\u1ec3u r\xf5 v\xe0 s\u1eed d\u1ee5ng Validation Config module m\u1ed9t c\xe1ch hi\u1ec7u qu\u1ea3, v\u1edbi \u0111\u1ea7y \u0111\u1ee7 examples, best practices v\xe0 troubleshooting guides!"})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}}}]);